Cleaning test database...
Running tests...
warning: GOPATH set to GOROOT (/home/jwwelbor/go) has no effect
?   	github.com/jwwelbor/shark-task-manager/cmd/demo	[no test files]
?   	github.com/jwwelbor/shark-task-manager/cmd/server	[no test files]
?   	github.com/jwwelbor/shark-task-manager/cmd/shark	[no test files]
?   	github.com/jwwelbor/shark-task-manager/cmd/test-db	[no test files]
=== RUN   TestRootCommand
--- PASS: TestRootCommand (0.00s)
=== RUN   TestGlobalConfig
--- PASS: TestGlobalConfig (0.00s)
=== RUN   TestGetDBPath
--- PASS: TestGetDBPath (0.00s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/cli	(cached)
?   	github.com/jwwelbor/shark-task-manager/internal/db	[no test files]
?   	github.com/jwwelbor/shark-task-manager/internal/models	[no test files]
?   	github.com/jwwelbor/shark-task-manager/internal/test	[no test files]
=== RUN   TestInitCommand
=== RUN   TestInitCommand/basic_initialization
[30;42m[30;42m SUCCESS [0m[0m [32m[32mShark CLI initialized successfully![0m[0m

âœ“ Database created: /tmp/TestInitCommandbasic_initialization2152693899/001/shark-tasks.db
âœ“ Folder created: /tmp/TestInitCommandbasic_initialization2152693899/001/docs/plan
âœ“ Folder created: /tmp/TestInitCommandbasic_initialization2152693899/001/shark-templates
âœ“ Config file created: /tmp/TestInitCommandbasic_initialization2152693899/001/.sharkconfig.json
âœ“ Templates copied: 4 files

Next steps:
1. Edit .sharkconfig.json to set default epic and agent
2. Create tasks with: shark task create --epic=E01 --feature=F01 --title="Task title" --agent=backend
3. Import existing tasks with: shark sync
=== RUN   TestInitCommand/init_with_custom_db_path
[30;42m[30;42m SUCCESS [0m[0m [32m[32mShark CLI initialized successfully![0m[0m

âœ“ Database created: /tmp/TestInitCommandinit_with_custom_db_path3787988716/001/custom-db.db
âœ“ Folder created: /tmp/TestInitCommandinit_with_custom_db_path3787988716/001/docs/plan
âœ“ Folder created: /tmp/TestInitCommandinit_with_custom_db_path3787988716/001/shark-templates
âœ“ Config file created: /tmp/TestInitCommandinit_with_custom_db_path3787988716/001/.sharkconfig.json
âœ“ Templates copied: 4 files

Next steps:
1. Edit .sharkconfig.json to set default epic and agent
2. Create tasks with: shark task create --epic=E01 --feature=F01 --title="Task title" --agent=backend
3. Import existing tasks with: shark sync
=== RUN   TestInitCommand/init_with_force_flag
[30;42m[30;42m SUCCESS [0m[0m [32m[32mShark CLI initialized successfully![0m[0m

âœ“ Database created: /tmp/TestInitCommandinit_with_force_flag2619499628/001/custom-db.db
âœ“ Folder created: /tmp/TestInitCommandinit_with_force_flag2619499628/001/docs/plan
âœ“ Folder created: /tmp/TestInitCommandinit_with_force_flag2619499628/001/shark-templates
âœ“ Config file created: /tmp/TestInitCommandinit_with_force_flag2619499628/001/.sharkconfig.json
âœ“ Templates copied: 4 files

Next steps:
1. Edit .sharkconfig.json to set default epic and agent
2. Create tasks with: shark task create --epic=E01 --feature=F01 --title="Task title" --agent=backend
3. Import existing tasks with: shark sync
=== RUN   TestInitCommand/idempotent_initialization
[30;42m[30;42m SUCCESS [0m[0m [32m[32mShark CLI initialized successfully![0m[0m

âœ“ Database created: /tmp/TestInitCommandidempotent_initialization2079526407/001/shark-tasks.db
âœ“ Folder created: /tmp/TestInitCommandidempotent_initialization2079526407/001/docs/plan
âœ“ Folder created: /tmp/TestInitCommandidempotent_initialization2079526407/001/shark-templates
âœ“ Config file created: /tmp/TestInitCommandidempotent_initialization2079526407/001/.sharkconfig.json
âœ“ Templates copied: 4 files

Next steps:
1. Edit .sharkconfig.json to set default epic and agent
2. Create tasks with: shark task create --epic=E01 --feature=F01 --title="Task title" --agent=backend
3. Import existing tasks with: shark sync
[30;42m[30;42m SUCCESS [0m[0m [32m[32mShark CLI initialized successfully![0m[0m

âœ“ Database exists: /tmp/TestInitCommandidempotent_initialization2079526407/001/shark-tasks.db
âœ“ Folder structure exists: docs/plan/, shark-templates/
âœ“ Config file created: /tmp/TestInitCommandidempotent_initialization2079526407/001/.sharkconfig.json
âœ“ Templates copied: 4 files

Next steps:
1. Edit .sharkconfig.json to set default epic and agent
2. Create tasks with: shark task create --epic=E01 --feature=F01 --title="Task title" --agent=backend
3. Import existing tasks with: shark sync
--- PASS: TestInitCommand (0.17s)
    --- PASS: TestInitCommand/basic_initialization (0.05s)
    --- PASS: TestInitCommand/init_with_custom_db_path (0.04s)
    --- PASS: TestInitCommand/init_with_force_flag (0.04s)
    --- PASS: TestInitCommand/idempotent_initialization (0.04s)
=== RUN   TestInitCommandJSON
{
  "config_created": true,
  "config_path": "/tmp/TestInitCommandJSON3752719862/001/.sharkconfig.json",
  "database_created": true,
  "database_path": "/tmp/TestInitCommandJSON3752719862/001/shark-tasks.db",
  "folders_created": [
    "/tmp/TestInitCommandJSON3752719862/001/docs/plan",
    "/tmp/TestInitCommandJSON3752719862/001/shark-templates"
  ],
  "status": "success",
  "templates_copied": 4
}
--- PASS: TestInitCommandJSON (0.04s)
=== RUN   TestTaskAvailability
=== RUN   TestTaskAvailability/no_dependencies
=== RUN   TestTaskAvailability/completed_dependency
=== RUN   TestTaskAvailability/incomplete_dependency
--- PASS: TestTaskAvailability (0.00s)
    --- PASS: TestTaskAvailability/no_dependencies (0.00s)
    --- PASS: TestTaskAvailability/completed_dependency (0.00s)
    --- PASS: TestTaskAvailability/incomplete_dependency (0.00s)
=== RUN   TestDependencyParsing
=== RUN   TestDependencyParsing/empty_string
=== RUN   TestDependencyParsing/empty_array
=== RUN   TestDependencyParsing/invalid_json
--- PASS: TestDependencyParsing (0.00s)
    --- PASS: TestDependencyParsing/empty_string (0.00s)
    --- PASS: TestDependencyParsing/empty_array (0.00s)
    --- PASS: TestDependencyParsing/invalid_json (0.00s)
=== RUN   TestStateTransitionLogic
=== RUN   TestStateTransitionLogic/todo_to_in_progress
=== RUN   TestStateTransitionLogic/in_progress_to_ready_for_review
=== RUN   TestStateTransitionLogic/ready_for_review_to_completed
=== RUN   TestStateTransitionLogic/todo_to_blocked
=== RUN   TestStateTransitionLogic/in_progress_to_blocked
=== RUN   TestStateTransitionLogic/blocked_to_todo
=== RUN   TestStateTransitionLogic/ready_for_review_to_in_progress
=== RUN   TestStateTransitionLogic/completed_to_in_progress
=== RUN   TestStateTransitionLogic/todo_to_completed
=== RUN   TestStateTransitionLogic/todo_to_ready_for_review
=== RUN   TestStateTransitionLogic/blocked_to_in_progress
=== RUN   TestStateTransitionLogic/blocked_to_completed
--- PASS: TestStateTransitionLogic (0.00s)
    --- PASS: TestStateTransitionLogic/todo_to_in_progress (0.00s)
    --- PASS: TestStateTransitionLogic/in_progress_to_ready_for_review (0.00s)
    --- PASS: TestStateTransitionLogic/ready_for_review_to_completed (0.00s)
    --- PASS: TestStateTransitionLogic/todo_to_blocked (0.00s)
    --- PASS: TestStateTransitionLogic/in_progress_to_blocked (0.00s)
    --- PASS: TestStateTransitionLogic/blocked_to_todo (0.00s)
    --- PASS: TestStateTransitionLogic/ready_for_review_to_in_progress (0.00s)
    --- PASS: TestStateTransitionLogic/completed_to_in_progress (0.00s)
    --- PASS: TestStateTransitionLogic/todo_to_completed (0.00s)
    --- PASS: TestStateTransitionLogic/todo_to_ready_for_review (0.00s)
    --- PASS: TestStateTransitionLogic/blocked_to_in_progress (0.00s)
    --- PASS: TestStateTransitionLogic/blocked_to_completed (0.00s)
=== RUN   TestNextTaskSelection
--- PASS: TestNextTaskSelection (0.00s)
=== RUN   TestJSONDependencyFormat
--- PASS: TestJSONDependencyFormat (0.00s)
=== RUN   TestAgentIdentification
=== RUN   TestAgentIdentification/flag_provided
--- PASS: TestAgentIdentification (0.00s)
    --- PASS: TestAgentIdentification/flag_provided (0.00s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/cli/commands	0.232s
=== RUN   TestIsValidTaskKey
=== RUN   TestIsValidTaskKey/valid_task_key
=== RUN   TestIsValidTaskKey/valid_with_different_numbers
=== RUN   TestIsValidTaskKey/invalid_-_no_T_prefix
=== RUN   TestIsValidTaskKey/invalid_-_lowercase
=== RUN   TestIsValidTaskKey/invalid_-_missing_sequence
=== RUN   TestIsValidTaskKey/invalid_-_wrong_format
=== RUN   TestIsValidTaskKey/invalid_-_empty
--- PASS: TestIsValidTaskKey (0.00s)
    --- PASS: TestIsValidTaskKey/valid_task_key (0.00s)
    --- PASS: TestIsValidTaskKey/valid_with_different_numbers (0.00s)
    --- PASS: TestIsValidTaskKey/invalid_-_no_T_prefix (0.00s)
    --- PASS: TestIsValidTaskKey/invalid_-_lowercase (0.00s)
    --- PASS: TestIsValidTaskKey/invalid_-_missing_sequence (0.00s)
    --- PASS: TestIsValidTaskKey/invalid_-_wrong_format (0.00s)
    --- PASS: TestIsValidTaskKey/invalid_-_empty (0.00s)
=== RUN   TestParseTaskKey
=== RUN   TestParseTaskKey/valid_task_key
=== RUN   TestParseTaskKey/different_numbers
=== RUN   TestParseTaskKey/invalid_format
=== RUN   TestParseTaskKey/empty
--- PASS: TestParseTaskKey (0.00s)
    --- PASS: TestParseTaskKey/valid_task_key (0.00s)
    --- PASS: TestParseTaskKey/different_numbers (0.00s)
    --- PASS: TestParseTaskKey/invalid_format (0.00s)
    --- PASS: TestParseTaskKey/empty (0.00s)
=== RUN   TestFindProjectRoot
--- PASS: TestFindProjectRoot (0.00s)
=== RUN   TestGetTaskFilePath
=== RUN   TestGetTaskFilePath/valid_task
=== RUN   TestGetTaskFilePath/invalid_task_key
--- PASS: TestGetTaskFilePath (0.00s)
    --- PASS: TestGetTaskFilePath/valid_task (0.00s)
    --- PASS: TestGetTaskFilePath/invalid_task_key (0.00s)
=== RUN   TestGetTasksDirectory
--- PASS: TestGetTasksDirectory (0.00s)
=== RUN   TestCreateTasksDirectory
--- PASS: TestCreateTasksDirectory (0.01s)
=== RUN   TestValidateFilePath
=== RUN   TestValidateFilePath/valid_path
=== RUN   TestValidateFilePath/missing_docs_folder
=== RUN   TestValidateFilePath/wrong_task_key
=== RUN   TestValidateFilePath/invalid_task_key
--- PASS: TestValidateFilePath (0.00s)
    --- PASS: TestValidateFilePath/valid_path (0.00s)
    --- PASS: TestValidateFilePath/missing_docs_folder (0.00s)
    --- PASS: TestValidateFilePath/wrong_task_key (0.00s)
    --- PASS: TestValidateFilePath/invalid_task_key (0.00s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/filepath	0.016s
=== RUN   TestFormatEpicListJSON
=== RUN   TestFormatEpicListJSON/empty_list
=== RUN   TestFormatEpicListJSON/single_epic
=== RUN   TestFormatEpicListJSON/multiple_epics
--- PASS: TestFormatEpicListJSON (0.00s)
    --- PASS: TestFormatEpicListJSON/empty_list (0.00s)
    --- PASS: TestFormatEpicListJSON/single_epic (0.00s)
    --- PASS: TestFormatEpicListJSON/multiple_epics (0.00s)
=== RUN   TestFormatEpicGetJSON
=== RUN   TestFormatEpicGetJSON/epic_with_no_features
=== RUN   TestFormatEpicGetJSON/epic_with_features
--- PASS: TestFormatEpicGetJSON (0.00s)
    --- PASS: TestFormatEpicGetJSON/epic_with_no_features (0.00s)
    --- PASS: TestFormatEpicGetJSON/epic_with_features (0.00s)
=== RUN   TestFormatFeatureListJSON
=== RUN   TestFormatFeatureListJSON/empty_list
=== RUN   TestFormatFeatureListJSON/single_feature
--- PASS: TestFormatFeatureListJSON (0.00s)
    --- PASS: TestFormatFeatureListJSON/empty_list (0.00s)
    --- PASS: TestFormatFeatureListJSON/single_feature (0.00s)
=== RUN   TestFormatFeatureGetJSON
=== RUN   TestFormatFeatureGetJSON/feature_with_no_tasks
=== RUN   TestFormatFeatureGetJSON/feature_with_tasks
--- PASS: TestFormatFeatureGetJSON (0.00s)
    --- PASS: TestFormatFeatureGetJSON/feature_with_no_tasks (0.00s)
    --- PASS: TestFormatFeatureGetJSON/feature_with_tasks (0.00s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/formatters	(cached)
=== RUN   TestCreateConfig
=== RUN   TestCreateConfig/creates_new_config_file
=== RUN   TestCreateConfig/skips_existing_config_in_non-interactive_mode
=== RUN   TestCreateConfig/overwrites_existing_config_with_force_flag
--- PASS: TestCreateConfig (0.01s)
    --- PASS: TestCreateConfig/creates_new_config_file (0.01s)
    --- PASS: TestCreateConfig/skips_existing_config_in_non-interactive_mode (0.00s)
    --- PASS: TestCreateConfig/overwrites_existing_config_with_force_flag (0.00s)
=== RUN   TestCreateConfigAtomicWrite
--- PASS: TestCreateConfigAtomicWrite (0.00s)
=== RUN   TestCreateConfigPermissions
--- PASS: TestCreateConfigPermissions (0.00s)
=== RUN   TestCreateConfigValidJSON
--- PASS: TestCreateConfigValidJSON (0.00s)
=== RUN   TestCreateDatabase
=== RUN   TestCreateDatabase/creates_new_database_successfully
=== RUN   TestCreateDatabase/idempotent_-_database_already_exists
=== RUN   TestCreateDatabase/fails_with_invalid_directory_path
--- PASS: TestCreateDatabase (0.08s)
    --- PASS: TestCreateDatabase/creates_new_database_successfully (0.04s)
    --- PASS: TestCreateDatabase/idempotent_-_database_already_exists (0.04s)
    --- PASS: TestCreateDatabase/fails_with_invalid_directory_path (0.00s)
=== RUN   TestCreateDatabaseFilePermissions
--- PASS: TestCreateDatabaseFilePermissions (0.04s)
=== RUN   TestCreateDatabaseForeignKeysEnabled
--- PASS: TestCreateDatabaseForeignKeysEnabled (0.04s)
=== RUN   TestCreateFolders
=== RUN   TestCreateFolders/creates_all_folders_successfully
=== RUN   TestCreateFolders/idempotent_-_folders_already_exist
=== RUN   TestCreateFolders/creates_nested_folders
--- PASS: TestCreateFolders (0.02s)
    --- PASS: TestCreateFolders/creates_all_folders_successfully (0.00s)
    --- PASS: TestCreateFolders/idempotent_-_folders_already_exist (0.01s)
    --- PASS: TestCreateFolders/creates_nested_folders (0.01s)
=== RUN   TestCreateFoldersInvalidPath
--- PASS: TestCreateFoldersInvalidPath (0.00s)
=== RUN   TestCreateFoldersAbsolutePaths
--- PASS: TestCreateFoldersAbsolutePaths (0.00s)
=== RUN   TestInitialize
=== RUN   TestInitialize/full_initialization_from_scratch
=== RUN   TestInitialize/idempotent_-_everything_exists
=== RUN   TestInitialize/force_mode_overwrites_config
--- PASS: TestInitialize (0.11s)
    --- PASS: TestInitialize/full_initialization_from_scratch (0.04s)
    --- PASS: TestInitialize/idempotent_-_everything_exists (0.04s)
    --- PASS: TestInitialize/force_mode_overwrites_config (0.03s)
=== RUN   TestInitializeWithContext
--- PASS: TestInitializeWithContext (0.03s)
=== RUN   TestInitializeErrorHandling
=== RUN   TestInitializeErrorHandling/database_creation_fails
=== RUN   TestInitializeErrorHandling/folder_creation_fails
--- PASS: TestInitializeErrorHandling (0.03s)
    --- PASS: TestInitializeErrorHandling/database_creation_fails (0.00s)
    --- PASS: TestInitializeErrorHandling/folder_creation_fails (0.03s)
=== RUN   TestInitializePerformance
--- PASS: TestInitializePerformance (0.03s)
=== RUN   TestCopyTemplates
=== RUN   TestCopyTemplates/copies_templates_to_new_directory
=== RUN   TestCopyTemplates/skips_existing_templates_without_force
=== RUN   TestCopyTemplates/overwrites_existing_templates_with_force
--- PASS: TestCopyTemplates (0.01s)
    --- PASS: TestCopyTemplates/copies_templates_to_new_directory (0.00s)
    --- PASS: TestCopyTemplates/skips_existing_templates_without_force (0.00s)
    --- PASS: TestCopyTemplates/overwrites_existing_templates_with_force (0.00s)
=== RUN   TestCopyTemplatesCreatesDirectory
--- PASS: TestCopyTemplatesCreatesDirectory (0.00s)
=== RUN   TestCopyTemplatesFilePermissions
--- PASS: TestCopyTemplatesFilePermissions (0.00s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/init	0.421s
=== RUN   TestBulkCreate
--- PASS: TestBulkCreate (0.02s)
=== RUN   TestBulkCreateEmpty
--- PASS: TestBulkCreateEmpty (0.00s)
=== RUN   TestBulkCreateValidationFailure
--- PASS: TestBulkCreateValidationFailure (0.00s)
=== RUN   TestBulkCreateRollback
--- PASS: TestBulkCreateRollback (0.00s)
=== RUN   TestGetByKeys
--- PASS: TestGetByKeys (0.00s)
=== RUN   TestGetByKeysPartial
--- PASS: TestGetByKeysPartial (0.00s)
=== RUN   TestGetByKeysEmpty
--- PASS: TestGetByKeysEmpty (0.00s)
=== RUN   TestUpdateMetadata
--- PASS: TestUpdateMetadata (0.00s)
=== RUN   TestUpdateMetadataNotFound
--- PASS: TestUpdateMetadataNotFound (0.00s)
=== RUN   TestEpicCreateIfNotExists
    bulk_operations_test.go:392: Epic was created on first call
--- PASS: TestEpicCreateIfNotExists (0.00s)
=== RUN   TestFeatureCreateIfNotExists
    bulk_operations_test.go:444: Feature was created on first call
--- PASS: TestFeatureCreateIfNotExists (0.00s)
=== RUN   TestBulkCreatePerformance
    bulk_operations_test.go:493: BulkCreate of 100 tasks completed in 2.506756ms
--- PASS: TestBulkCreatePerformance (0.00s)
=== RUN   TestGetByKeysPerformance
    bulk_operations_test.go:547: GetByKeys of 100 tasks completed in 1.725122ms
--- PASS: TestGetByKeysPerformance (0.01s)
=== RUN   TestEpicListingIntegration
    epic_feature_integration_test.go:107: Successfully listed 8 epics
--- PASS: TestEpicListingIntegration (0.01s)
=== RUN   TestEpicDetailsIntegration
    epic_feature_integration_test.go:223: Epic E58: progress=65.0% (expected 65.0%), features=3
--- PASS: TestEpicDetailsIntegration (0.01s)
=== RUN   TestFeatureDetailsIntegration
    epic_feature_integration_test.go:296: Feature E50-F02: progress=70.0% with 7 completed, 2 in_progress, 1 todo tasks
--- PASS: TestFeatureDetailsIntegration (0.00s)
=== RUN   TestFeatureListFilteringIntegration
    epic_feature_integration_test.go:319: Epic already exists: failed to create epic: UNIQUE constraint failed: epics.key
--- SKIP: TestFeatureListFilteringIntegration (0.00s)
=== RUN   TestProgressCalculationEdgeCases
=== RUN   TestProgressCalculationEdgeCases/FeatureWithZeroTasks
=== RUN   TestProgressCalculationEdgeCases/AllTasksCompleted
    epic_feature_integration_test.go:411: Epic already exists
=== NAME  TestProgressCalculationEdgeCases
    epic_feature_integration_test.go:443: All edge cases handled correctly
--- PASS: TestProgressCalculationEdgeCases (0.00s)
    --- PASS: TestProgressCalculationEdgeCases/FeatureWithZeroTasks (0.00s)
    --- SKIP: TestProgressCalculationEdgeCases/AllTasksCompleted (0.00s)
=== RUN   TestMultiLevelProgressPropagation
    epic_feature_integration_test.go:467: Epic already exists: failed to create epic: UNIQUE constraint failed: epics.key
--- SKIP: TestMultiLevelProgressPropagation (0.00s)
=== RUN   TestFeatureRepository_ListByStatus
=== RUN   TestFeatureRepository_ListByStatus/filter_by_active_status
=== RUN   TestFeatureRepository_ListByStatus/filter_by_completed_status
=== RUN   TestFeatureRepository_ListByStatus/filter_by_draft_status
--- PASS: TestFeatureRepository_ListByStatus (0.00s)
    --- PASS: TestFeatureRepository_ListByStatus/filter_by_active_status (0.00s)
    --- PASS: TestFeatureRepository_ListByStatus/filter_by_completed_status (0.00s)
    --- PASS: TestFeatureRepository_ListByStatus/filter_by_draft_status (0.00s)
=== RUN   TestFeatureRepository_ListByEpicAndStatus
=== RUN   TestFeatureRepository_ListByEpicAndStatus/filter_by_epic_and_active_status
--- PASS: TestFeatureRepository_ListByEpicAndStatus (0.00s)
    --- PASS: TestFeatureRepository_ListByEpicAndStatus/filter_by_epic_and_active_status (0.00s)
=== RUN   TestFeatureRepository_GetTaskCount
=== RUN   TestFeatureRepository_GetTaskCount/get_task_count_for_feature
=== RUN   TestFeatureRepository_GetTaskCount/get_task_count_for_feature_with_no_tasks
--- PASS: TestFeatureRepository_GetTaskCount (0.00s)
    --- PASS: TestFeatureRepository_GetTaskCount/get_task_count_for_feature (0.00s)
    --- PASS: TestFeatureRepository_GetTaskCount/get_task_count_for_feature_with_no_tasks (0.00s)
=== RUN   TestTaskRepository_GetStatusBreakdown
=== RUN   TestTaskRepository_GetStatusBreakdown/get_status_breakdown_for_feature
=== RUN   TestTaskRepository_GetStatusBreakdown/get_status_breakdown_for_feature_with_no_tasks
--- PASS: TestTaskRepository_GetStatusBreakdown (0.00s)
    --- PASS: TestTaskRepository_GetStatusBreakdown/get_status_breakdown_for_feature (0.00s)
    --- PASS: TestTaskRepository_GetStatusBreakdown/get_status_breakdown_for_feature_with_no_tasks (0.00s)
=== RUN   TestFeatureProgress_NoTasks
    progress_calc_test.go:49: Using epic E90 with ID=34
--- PASS: TestFeatureProgress_NoTasks (0.00s)
=== RUN   TestFeatureProgress_CompletedTasks
    progress_calc_test.go:49: Using epic E91 with ID=35
--- PASS: TestFeatureProgress_CompletedTasks (0.02s)
=== RUN   TestFeatureProgress_CompletedAndArchived
    progress_calc_test.go:49: Using epic E92 with ID=36
--- PASS: TestFeatureProgress_CompletedAndArchived (0.01s)
=== RUN   TestFeatureProgress_AllCompleted
    progress_calc_test.go:49: Using epic E93 with ID=37
--- PASS: TestFeatureProgress_AllCompleted (0.00s)
=== RUN   TestFeatureProgress_NoneCompleted
    progress_calc_test.go:49: Using epic E94 with ID=38
--- PASS: TestFeatureProgress_NoneCompleted (0.00s)
=== RUN   TestFeatureProgress_BlockedNotCounted
    progress_calc_test.go:49: Using epic E95 with ID=25
--- PASS: TestFeatureProgress_BlockedNotCounted (0.00s)
=== RUN   TestEpicProgress_NoFeatures
    progress_calc_test.go:49: Using epic E96 with ID=30
--- PASS: TestEpicProgress_NoFeatures (0.00s)
=== RUN   TestEpicProgress_WeightedAverage
    progress_calc_test.go:49: Using epic E97 with ID=24
    progress_calc_test.go:49: Using epic E97 with ID=24
--- PASS: TestEpicProgress_WeightedAverage (0.01s)
=== RUN   TestEpicProgress_TaskCountWeighting
    progress_calc_test.go:49: Using epic E98 with ID=15
    progress_calc_test.go:49: Using epic E98 with ID=15
--- PASS: TestEpicProgress_TaskCountWeighting (0.00s)
=== RUN   TestFeatureProgressByKey
    progress_calc_test.go:49: Using epic E80 with ID=45
--- PASS: TestFeatureProgressByKey (0.00s)
=== RUN   TestEpicProgressByKey
    progress_calc_test.go:49: Using epic E81 with ID=46
--- PASS: TestEpicProgressByKey (0.00s)
=== RUN   TestUpdateProgressByKey
    progress_calc_test.go:49: Using epic E82 with ID=47
--- PASS: TestUpdateProgressByKey (0.00s)
=== RUN   TestFeatureProgressPerformance
    progress_calc_test.go:49: Using epic E83 with ID=48
    progress_performance_test.go:40: Feature progress calculation query plan:
    progress_performance_test.go:48:   SEARCH tasks USING INDEX idx_tasks_feature_id (feature_id=?)
--- PASS: TestFeatureProgressPerformance (0.00s)
=== RUN   TestEpicProgressPerformance
    progress_calc_test.go:49: Using epic E84 with ID=49
    progress_calc_test.go:49: Using epic E84 with ID=49
    progress_performance_test.go:95: Epic progress calculation query plan:
    progress_performance_test.go:103:   SEARCH f USING INDEX idx_features_epic_id (epic_id=?)
    progress_performance_test.go:103:   CORRELATED SCALAR SUBQUERY 1
    progress_performance_test.go:103:   SEARCH t USING COVERING INDEX idx_tasks_feature_id (feature_id=?)
    progress_performance_test.go:103:   CORRELATED SCALAR SUBQUERY 2
    progress_performance_test.go:103:   SEARCH t USING COVERING INDEX idx_tasks_feature_id (feature_id=?)
--- PASS: TestEpicProgressPerformance (0.00s)
=== RUN   TestQueryPlanAnalysis
=== RUN   TestQueryPlanAnalysis/FeatureProgressQueryPlan
    query_performance_benchmark_test.go:204: Feature progress calculation query plan:
    query_performance_benchmark_test.go:213:   SEARCH tasks USING INDEX idx_tasks_feature_id (feature_id=?)
=== RUN   TestQueryPlanAnalysis/EpicProgressQueryPlan
    query_performance_benchmark_test.go:246: Epic progress calculation query plan:
    query_performance_benchmark_test.go:255:   SEARCH f USING INDEX idx_features_epic_id (epic_id=?)
    query_performance_benchmark_test.go:255:   CORRELATED SCALAR SUBQUERY 1
    query_performance_benchmark_test.go:255:   SEARCH t USING COVERING INDEX idx_tasks_feature_id (feature_id=?)
    query_performance_benchmark_test.go:255:   CORRELATED SCALAR SUBQUERY 2
    query_performance_benchmark_test.go:255:   SEARCH t USING COVERING INDEX idx_tasks_feature_id (feature_id=?)
=== RUN   TestQueryPlanAnalysis/GetByKeyQueryPlan
    query_performance_benchmark_test.go:282: GetByKey query plan:
    query_performance_benchmark_test.go:291:   SEARCH features USING INDEX idx_features_key (key=?)
--- PASS: TestQueryPlanAnalysis (0.00s)
    --- PASS: TestQueryPlanAnalysis/FeatureProgressQueryPlan (0.00s)
    --- PASS: TestQueryPlanAnalysis/EpicProgressQueryPlan (0.00s)
    --- PASS: TestQueryPlanAnalysis/GetByKeyQueryPlan (0.00s)
=== RUN   TestNoPlusOneQueries
    query_performance_benchmark_test.go:333: ListByEpic for 1 features: 103.923Âµs (no N+1 detected)
--- PASS: TestNoPlusOneQueries (0.00s)
=== RUN   TestCompleteWorkflow
--- PASS: TestCompleteWorkflow (0.00s)
=== RUN   TestBlockUnblockWorkflow
--- PASS: TestBlockUnblockWorkflow (0.00s)
=== RUN   TestReopenWorkflow
--- PASS: TestReopenWorkflow (0.02s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/repository	(cached)
=== RUN   TestConflictDetector_DetectConflicts
=== RUN   TestConflictDetector_DetectConflicts/no_conflicts_when_file_and_database_match
=== RUN   TestConflictDetector_DetectConflicts/detects_title_conflict
=== RUN   TestConflictDetector_DetectConflicts/no_title_conflict_when_file_title_is_empty
=== RUN   TestConflictDetector_DetectConflicts/detects_description_conflict_when_both_exist
=== RUN   TestConflictDetector_DetectConflicts/no_description_conflict_when_file_description_is_nil
=== RUN   TestConflictDetector_DetectConflicts/no_description_conflict_when_database_description_is_nil
=== RUN   TestConflictDetector_DetectConflicts/detects_file_path_conflict_when_database_path_is_different
=== RUN   TestConflictDetector_DetectConflicts/detects_file_path_conflict_when_database_path_is_nil
=== RUN   TestConflictDetector_DetectConflicts/detects_multiple_conflicts
=== RUN   TestConflictDetector_DetectConflicts/does_not_detect_conflicts_for_database-only_fields
--- PASS: TestConflictDetector_DetectConflicts (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/no_conflicts_when_file_and_database_match (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/detects_title_conflict (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/no_title_conflict_when_file_title_is_empty (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/detects_description_conflict_when_both_exist (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/no_description_conflict_when_file_description_is_nil (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/no_description_conflict_when_database_description_is_nil (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/detects_file_path_conflict_when_database_path_is_different (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/detects_file_path_conflict_when_database_path_is_nil (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/detects_multiple_conflicts (0.00s)
    --- PASS: TestConflictDetector_DetectConflicts/does_not_detect_conflicts_for_database-only_fields (0.00s)
=== RUN   TestSyncEngine_NewSyncEngine
--- PASS: TestSyncEngine_NewSyncEngine (0.05s)
=== RUN   TestSyncEngine_Sync_EmptyDirectory
--- PASS: TestSyncEngine_Sync_EmptyDirectory (0.04s)
=== RUN   TestSyncEngine_Sync_NewTasksImport
--- PASS: TestSyncEngine_Sync_NewTasksImport (0.05s)
=== RUN   TestSyncEngine_Sync_UpdateExistingTasks
--- PASS: TestSyncEngine_Sync_UpdateExistingTasks (0.04s)
=== RUN   TestSyncEngine_Sync_DryRun
--- PASS: TestSyncEngine_Sync_DryRun (0.04s)
=== RUN   TestSyncEngine_Sync_ConflictStrategies
=== RUN   TestSyncEngine_Sync_ConflictStrategies/file-wins
=== RUN   TestSyncEngine_Sync_ConflictStrategies/database-wins
--- PASS: TestSyncEngine_Sync_ConflictStrategies (0.10s)
    --- PASS: TestSyncEngine_Sync_ConflictStrategies/file-wins (0.05s)
    --- PASS: TestSyncEngine_Sync_ConflictStrategies/database-wins (0.05s)
=== RUN   TestSyncEngine_Sync_InvalidYAML
--- PASS: TestSyncEngine_Sync_InvalidYAML (0.03s)
=== RUN   TestSyncEngine_Sync_TransactionRollback
    engine_test.go:635: Transaction rollback test requires error injection mechanism
--- SKIP: TestSyncEngine_Sync_TransactionRollback (0.00s)
=== RUN   TestConflictDetectionAndResolution
=== RUN   TestConflictDetectionAndResolution/complete_workflow:_file-wins_strategy
=== RUN   TestConflictDetectionAndResolution/complete_workflow:_newer-wins_with_database_newer
=== RUN   TestConflictDetectionAndResolution/no_conflicts_means_no_changes
=== RUN   TestConflictDetectionAndResolution/partial_file_metadata_doesn't_create_conflicts
--- PASS: TestConflictDetectionAndResolution (0.00s)
    --- PASS: TestConflictDetectionAndResolution/complete_workflow:_file-wins_strategy (0.00s)
    --- PASS: TestConflictDetectionAndResolution/complete_workflow:_newer-wins_with_database_newer (0.00s)
    --- PASS: TestConflictDetectionAndResolution/no_conflicts_means_no_changes (0.00s)
    --- PASS: TestConflictDetectionAndResolution/partial_file_metadata_doesn't_create_conflicts (0.00s)
=== RUN   TestFullSyncWorkflow
=== RUN   TestFullSyncWorkflow/scanner_finds_files,_engine_imports_them
--- PASS: TestFullSyncWorkflow (0.00s)
    --- PASS: TestFullSyncWorkflow/scanner_finds_files,_engine_imports_them (0.00s)
=== RUN   TestConflictResolver_ResolveConflicts
=== RUN   TestConflictResolver_ResolveConflicts/file-wins_strategy_updates_all_conflicting_fields
=== RUN   TestConflictResolver_ResolveConflicts/database-wins_strategy_keeps_all_database_values
=== RUN   TestConflictResolver_ResolveConflicts/newer-wins_strategy_uses_file_when_file_is_newer
=== RUN   TestConflictResolver_ResolveConflicts/newer-wins_strategy_uses_database_when_database_is_newer
=== RUN   TestConflictResolver_ResolveConflicts/file-wins_with_nil_description_in_file_preserves_database_description
=== RUN   TestConflictResolver_ResolveConflicts/resolves_empty_conflict_list_without_error
=== RUN   TestConflictResolver_ResolveConflicts/returns_copy_of_database_task,_not_original
=== RUN   TestConflictResolver_ResolveConflicts/preserves_all_database-only_fields
--- PASS: TestConflictResolver_ResolveConflicts (0.00s)
    --- PASS: TestConflictResolver_ResolveConflicts/file-wins_strategy_updates_all_conflicting_fields (0.00s)
    --- PASS: TestConflictResolver_ResolveConflicts/database-wins_strategy_keeps_all_database_values (0.00s)
    --- PASS: TestConflictResolver_ResolveConflicts/newer-wins_strategy_uses_file_when_file_is_newer (0.00s)
    --- PASS: TestConflictResolver_ResolveConflicts/newer-wins_strategy_uses_database_when_database_is_newer (0.00s)
    --- PASS: TestConflictResolver_ResolveConflicts/file-wins_with_nil_description_in_file_preserves_database_description (0.00s)
    --- PASS: TestConflictResolver_ResolveConflicts/resolves_empty_conflict_list_without_error (0.00s)
    --- PASS: TestConflictResolver_ResolveConflicts/returns_copy_of_database_task,_not_original (0.00s)
    --- PASS: TestConflictResolver_ResolveConflicts/preserves_all_database-only_fields (0.00s)
=== RUN   TestScanRealProjectStructure
    scanner_integration_test.go:38: Found task file: T-E04-F07-001.md (Epic: E04, Feature: E04-F07)
    scanner_integration_test.go:38: Found task file: T-E04-F07-002.md (Epic: E04, Feature: E04-F07)
    scanner_integration_test.go:38: Found task file: T-E04-F07-003.md (Epic: E04, Feature: E04-F07)
    scanner_integration_test.go:38: Found task file: T-E04-F07-004.md (Epic: E04, Feature: E04-F07)
    scanner_integration_test.go:38: Found task file: T-E04-F07-005.md (Epic: E04, Feature: E04-F07)
    scanner_integration_test.go:38: Found task file: T-E04-F07-006.md (Epic: E04, Feature: E04-F07)
--- PASS: TestScanRealProjectStructure (0.00s)
=== RUN   TestScanSpecificFeature
    scanner_integration_test.go:97: Scanning feature directory: /home/jwwelbor/projects/shark-task-manager/docs/plan/E01-authentication-system/E01-F01-oauth-login-integration
--- PASS: TestScanSpecificFeature (0.00s)
=== RUN   TestScanPerformance
    scanner_integration_test.go:150: Scanned 6 files in 1.781986ms
    scanner_integration_test.go:156: Average time per file: 296.997Âµs
--- PASS: TestScanPerformance (0.00s)
=== RUN   TestScanWithTasksDirectory
    scanner_integration_test.go:192: Found 39 task files in legacy tasks directory
    scanner_integration_test.go:204: Legacy file: T-E04-F01-001.md -> Epic=E04, Feature=E04-F01
    scanner_integration_test.go:204: Legacy file: T-E04-F01-002.md -> Epic=E04, Feature=E04-F01
    scanner_integration_test.go:204: Legacy file: T-E04-F01-003.md -> Epic=E04, Feature=E04-F01
    scanner_integration_test.go:204: Legacy file: T-E04-F01-004.md -> Epic=E04, Feature=E04-F01
    scanner_integration_test.go:204: Legacy file: T-E04-F01-005.md -> Epic=E04, Feature=E04-F01
    scanner_integration_test.go:204: Legacy file: T-E04-F01-006.md -> Epic=E04, Feature=E04-F01
    scanner_integration_test.go:204: Legacy file: T-E04-F02-001.md -> Epic=E04, Feature=E04-F02
    scanner_integration_test.go:204: Legacy file: T-E04-F02-002.md -> Epic=E04, Feature=E04-F02
    scanner_integration_test.go:204: Legacy file: T-E04-F02-003.md -> Epic=E04, Feature=E04-F02
    scanner_integration_test.go:204: Legacy file: T-E04-F02-004.md -> Epic=E04, Feature=E04-F02
    scanner_integration_test.go:204: Legacy file: T-E04-F02-005.md -> Epic=E04, Feature=E04-F02
    scanner_integration_test.go:204: Legacy file: T-E04-F02-006.md -> Epic=E04, Feature=E04-F02
    scanner_integration_test.go:204: Legacy file: T-E04-F03-001.md -> Epic=E04, Feature=E04-F03
    scanner_integration_test.go:204: Legacy file: T-E04-F03-002.md -> Epic=E04, Feature=E04-F03
    scanner_integration_test.go:204: Legacy file: T-E04-F03-003.md -> Epic=E04, Feature=E04-F03
    scanner_integration_test.go:204: Legacy file: T-E04-F03-004.md -> Epic=E04, Feature=E04-F03
    scanner_integration_test.go:204: Legacy file: T-E04-F04-001.md -> Epic=E04, Feature=E04-F04
    scanner_integration_test.go:204: Legacy file: T-E04-F04-002.md -> Epic=E04, Feature=E04-F04
    scanner_integration_test.go:204: Legacy file: T-E04-F04-003.md -> Epic=E04, Feature=E04-F04
    scanner_integration_test.go:204: Legacy file: T-E04-F04-004.md -> Epic=E04, Feature=E04-F04
    scanner_integration_test.go:204: Legacy file: T-E04-F04-005.md -> Epic=E04, Feature=E04-F04
    scanner_integration_test.go:204: Legacy file: T-E04-F04-006.md -> Epic=E04, Feature=E04-F04
    scanner_integration_test.go:204: Legacy file: T-E04-F05-001.md -> Epic=E04, Feature=E04-F05
    scanner_integration_test.go:204: Legacy file: T-E04-F05-002.md -> Epic=E04, Feature=E04-F05
    scanner_integration_test.go:204: Legacy file: T-E04-F05-003.md -> Epic=E04, Feature=E04-F05
    scanner_integration_test.go:204: Legacy file: T-E04-F05-004.md -> Epic=E04, Feature=E04-F05
    scanner_integration_test.go:204: Legacy file: T-E04-F06-001.md -> Epic=E04, Feature=E04-F06
    scanner_integration_test.go:204: Legacy file: T-E04-F06-002.md -> Epic=E04, Feature=E04-F06
    scanner_integration_test.go:204: Legacy file: T-E04-F06-003.md -> Epic=E04, Feature=E04-F06
    scanner_integration_test.go:204: Legacy file: T-E04-F06-004.md -> Epic=E04, Feature=E04-F06
    scanner_integration_test.go:204: Legacy file: T-E04-F05-005.md -> Epic=E04, Feature=E04-F05
    scanner_integration_test.go:204: Legacy file: T-E04-F05-006.md -> Epic=E04, Feature=E04-F05
    scanner_integration_test.go:204: Legacy file: T-E04-F07-001.md -> Epic=E04, Feature=E04-F07
    scanner_integration_test.go:204: Legacy file: T-E04-F07-002.md -> Epic=E04, Feature=E04-F07
    scanner_integration_test.go:204: Legacy file: T-E04-F07-003.md -> Epic=E04, Feature=E04-F07
    scanner_integration_test.go:204: Legacy file: T-E04-F07-004.md -> Epic=E04, Feature=E04-F07
    scanner_integration_test.go:204: Legacy file: T-E04-F07-005.md -> Epic=E04, Feature=E04-F07
    scanner_integration_test.go:204: Legacy file: T-E04-F07-006.md -> Epic=E04, Feature=E04-F07
    scanner_integration_test.go:204: Legacy file: T-E04-F07-007.md -> Epic=E04, Feature=E04-F07
--- PASS: TestScanWithTasksDirectory (0.00s)
=== RUN   TestScanHandlesPermissionErrors
--- PASS: TestScanHandlesPermissionErrors (0.00s)
=== RUN   TestScanWithNestedSubdirectories
--- PASS: TestScanWithNestedSubdirectories (0.01s)
=== RUN   TestIsTaskFile
=== RUN   TestIsTaskFile/valid_task_file_with_all_digits
=== RUN   TestIsTaskFile/valid_task_file_with_different_numbers
=== RUN   TestIsTaskFile/valid_task_file_with_high_numbers
=== RUN   TestIsTaskFile/missing_T_prefix
=== RUN   TestIsTaskFile/wrong_extension
=== RUN   TestIsTaskFile/single_digit_epic
=== RUN   TestIsTaskFile/single_digit_feature
=== RUN   TestIsTaskFile/single_digit_task_number
=== RUN   TestIsTaskFile/two_digit_task_number
=== RUN   TestIsTaskFile/lowercase_letters
=== RUN   TestIsTaskFile/no_extension
=== RUN   TestIsTaskFile/extra_characters_before
=== RUN   TestIsTaskFile/extra_characters_after
=== RUN   TestIsTaskFile/random_markdown_file
--- PASS: TestIsTaskFile (0.00s)
    --- PASS: TestIsTaskFile/valid_task_file_with_all_digits (0.00s)
    --- PASS: TestIsTaskFile/valid_task_file_with_different_numbers (0.00s)
    --- PASS: TestIsTaskFile/valid_task_file_with_high_numbers (0.00s)
    --- PASS: TestIsTaskFile/missing_T_prefix (0.00s)
    --- PASS: TestIsTaskFile/wrong_extension (0.00s)
    --- PASS: TestIsTaskFile/single_digit_epic (0.00s)
    --- PASS: TestIsTaskFile/single_digit_feature (0.00s)
    --- PASS: TestIsTaskFile/single_digit_task_number (0.00s)
    --- PASS: TestIsTaskFile/two_digit_task_number (0.00s)
    --- PASS: TestIsTaskFile/lowercase_letters (0.00s)
    --- PASS: TestIsTaskFile/no_extension (0.00s)
    --- PASS: TestIsTaskFile/extra_characters_before (0.00s)
    --- PASS: TestIsTaskFile/extra_characters_after (0.00s)
    --- PASS: TestIsTaskFile/random_markdown_file (0.00s)
=== RUN   TestInferEpicFeature
=== RUN   TestInferEpicFeature/standard_structure_with_epic_and_feature_folders
=== RUN   TestInferEpicFeature/different_epic_and_feature
=== RUN   TestInferEpicFeature/nested_in_subfolder
=== RUN   TestInferEpicFeature/legacy_todo_folder_-_extract_from_filename
=== RUN   TestInferEpicFeature/legacy_active_folder_-_extract_from_filename
=== RUN   TestInferEpicFeature/legacy_completed_folder_-_extract_from_filename
=== RUN   TestInferEpicFeature/root_directory_-_extract_from_filename
=== RUN   TestInferEpicFeature/relative_path_-_extract_from_filename
--- PASS: TestInferEpicFeature (0.00s)
    --- PASS: TestInferEpicFeature/standard_structure_with_epic_and_feature_folders (0.00s)
    --- PASS: TestInferEpicFeature/different_epic_and_feature (0.00s)
    --- PASS: TestInferEpicFeature/nested_in_subfolder (0.00s)
    --- PASS: TestInferEpicFeature/legacy_todo_folder_-_extract_from_filename (0.00s)
    --- PASS: TestInferEpicFeature/legacy_active_folder_-_extract_from_filename (0.00s)
    --- PASS: TestInferEpicFeature/legacy_completed_folder_-_extract_from_filename (0.00s)
    --- PASS: TestInferEpicFeature/root_directory_-_extract_from_filename (0.00s)
    --- PASS: TestInferEpicFeature/relative_path_-_extract_from_filename (0.00s)
=== RUN   TestValidateFilePath
=== RUN   TestValidateFilePath/file_in_docs/plan_is_allowed
=== RUN   TestValidateFilePath/file_in_docs/tasks_is_allowed
=== RUN   TestValidateFilePath/file_in_shark-templates_is_allowed
=== RUN   TestValidateFilePath/file_outside_allowed_directories_is_rejected
=== RUN   TestValidateFilePath/path_traversal_attempt_is_rejected
=== RUN   TestValidateFilePath/absolute_path_to_system_file_is_rejected
--- PASS: TestValidateFilePath (0.01s)
    --- PASS: TestValidateFilePath/file_in_docs/plan_is_allowed (0.00s)
    --- PASS: TestValidateFilePath/file_in_docs/tasks_is_allowed (0.00s)
    --- PASS: TestValidateFilePath/file_in_shark-templates_is_allowed (0.00s)
    --- PASS: TestValidateFilePath/file_outside_allowed_directories_is_rejected (0.00s)
    --- PASS: TestValidateFilePath/path_traversal_attempt_is_rejected (0.00s)
    --- PASS: TestValidateFilePath/absolute_path_to_system_file_is_rejected (0.00s)
=== RUN   TestValidateFileSize
=== RUN   TestValidateFileSize/small_file_is_accepted
=== RUN   TestValidateFileSize/large_file_is_rejected
=== RUN   TestValidateFileSize/non-existent_file_returns_error
--- PASS: TestValidateFileSize (0.01s)
    --- PASS: TestValidateFileSize/small_file_is_accepted (0.00s)
    --- PASS: TestValidateFileSize/large_file_is_rejected (0.00s)
    --- PASS: TestValidateFileSize/non-existent_file_returns_error (0.00s)
=== RUN   TestValidateFileIsRegular
=== RUN   TestValidateFileIsRegular/regular_file_is_accepted
=== RUN   TestValidateFileIsRegular/directory_is_rejected
=== RUN   TestValidateFileIsRegular/symlink_is_rejected
=== RUN   TestValidateFileIsRegular/non-existent_file_returns_error
--- PASS: TestValidateFileIsRegular (0.00s)
    --- PASS: TestValidateFileIsRegular/regular_file_is_accepted (0.00s)
    --- PASS: TestValidateFileIsRegular/directory_is_rejected (0.00s)
    --- PASS: TestValidateFileIsRegular/symlink_is_rejected (0.00s)
    --- PASS: TestValidateFileIsRegular/non-existent_file_returns_error (0.00s)
=== RUN   TestExtractKeyFromFilename
=== RUN   TestExtractKeyFromFilename/standard_task_filename
=== RUN   TestExtractKeyFromFilename/different_numbers
=== RUN   TestExtractKeyFromFilename/high_numbers
--- PASS: TestExtractKeyFromFilename (0.00s)
    --- PASS: TestExtractKeyFromFilename/standard_task_filename (0.00s)
    --- PASS: TestExtractKeyFromFilename/different_numbers (0.00s)
    --- PASS: TestExtractKeyFromFilename/high_numbers (0.00s)
=== RUN   TestScan_EmptyDirectory
--- PASS: TestScan_EmptyDirectory (0.00s)
=== RUN   TestScan_NonexistentDirectory
--- PASS: TestScan_NonexistentDirectory (0.00s)
=== RUN   TestScan_SingleFile
--- PASS: TestScan_SingleFile (0.00s)
=== RUN   TestScan_IgnoresNonTaskFiles
--- PASS: TestScan_IgnoresNonTaskFiles (0.00s)
=== RUN   TestScan_RecursiveTraversal
--- PASS: TestScan_RecursiveTraversal (0.01s)
=== RUN   TestScan_RejectsOversizedFiles
--- PASS: TestScan_RejectsOversizedFiles (0.01s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/sync	0.436s
=== RUN   TestKeyGenerator_GenerateTaskKey_FirstTask
--- PASS: TestKeyGenerator_GenerateTaskKey_FirstTask (0.08s)
=== RUN   TestKeyGenerator_GenerateTaskKey_SecondTask
--- PASS: TestKeyGenerator_GenerateTaskKey_SecondTask (0.09s)
=== RUN   TestKeyGenerator_GenerateTaskKey_MultipleTasksWithGaps
--- PASS: TestKeyGenerator_GenerateTaskKey_MultipleTasksWithGaps (0.09s)
=== RUN   TestKeyGenerator_GenerateTaskKey_NormalizeFeatureKey
--- PASS: TestKeyGenerator_GenerateTaskKey_NormalizeFeatureKey (0.06s)
=== RUN   TestKeyGenerator_GenerateTaskKey_FullFeatureKey
--- PASS: TestKeyGenerator_GenerateTaskKey_FullFeatureKey (0.07s)
=== RUN   TestKeyGenerator_GenerateTaskKey_NonExistentFeature
--- PASS: TestKeyGenerator_GenerateTaskKey_NonExistentFeature (0.04s)
=== RUN   TestKeyGenerator_GenerateTaskKey_MaxTaskCount
--- PASS: TestKeyGenerator_GenerateTaskKey_MaxTaskCount (0.06s)
=== RUN   TestKeyGenerator_GenerateTaskKey_ThreeDigitNumbers
--- PASS: TestKeyGenerator_GenerateTaskKey_ThreeDigitNumbers (0.05s)
=== RUN   TestExtractNumberFromKey
=== RUN   TestExtractNumberFromKey/Single_digit
=== RUN   TestExtractNumberFromKey/Two_digits
=== RUN   TestExtractNumberFromKey/Three_digits
=== RUN   TestExtractNumberFromKey/Invalid_format
=== RUN   TestExtractNumberFromKey/Missing_task_prefix
--- PASS: TestExtractNumberFromKey (0.00s)
    --- PASS: TestExtractNumberFromKey/Single_digit (0.00s)
    --- PASS: TestExtractNumberFromKey/Two_digits (0.00s)
    --- PASS: TestExtractNumberFromKey/Three_digits (0.00s)
    --- PASS: TestExtractNumberFromKey/Invalid_format (0.00s)
    --- PASS: TestExtractNumberFromKey/Missing_task_prefix (0.00s)
=== RUN   TestNormalizeFeatureKey
=== RUN   TestNormalizeFeatureKey/Short_form
=== RUN   TestNormalizeFeatureKey/Full_form
=== RUN   TestNormalizeFeatureKey/Different_epic_in_full_form
=== RUN   TestNormalizeFeatureKey/Invalid_format
--- PASS: TestNormalizeFeatureKey (0.00s)
    --- PASS: TestNormalizeFeatureKey/Short_form (0.00s)
    --- PASS: TestNormalizeFeatureKey/Full_form (0.00s)
    --- PASS: TestNormalizeFeatureKey/Different_epic_in_full_form (0.00s)
    --- PASS: TestNormalizeFeatureKey/Invalid_format (0.00s)
=== RUN   TestExtractFeaturePart
=== RUN   TestExtractFeaturePart/Standard_format
=== RUN   TestExtractFeaturePart/Different_epic
=== RUN   TestExtractFeaturePart/Short_form
--- PASS: TestExtractFeaturePart (0.00s)
    --- PASS: TestExtractFeaturePart/Standard_format (0.00s)
    --- PASS: TestExtractFeaturePart/Different_epic (0.00s)
    --- PASS: TestExtractFeaturePart/Short_form (0.00s)
=== RUN   TestValidator_ValidateTaskInput_Success
--- PASS: TestValidator_ValidateTaskInput_Success (0.04s)
=== RUN   TestValidator_ValidateTaskInput_InvalidEpic
--- PASS: TestValidator_ValidateTaskInput_InvalidEpic (0.02s)
=== RUN   TestValidator_ValidateTaskInput_InvalidFeature
--- PASS: TestValidator_ValidateTaskInput_InvalidFeature (0.04s)
=== RUN   TestValidator_ValidateTaskInput_FeatureWrongEpic
--- PASS: TestValidator_ValidateTaskInput_FeatureWrongEpic (0.04s)
=== RUN   TestValidator_ValidateTaskInput_InvalidAgentType
--- PASS: TestValidator_ValidateTaskInput_InvalidAgentType (0.04s)
=== RUN   TestValidator_ValidateTaskInput_AllAgentTypes
=== RUN   TestValidator_ValidateTaskInput_AllAgentTypes/frontend
=== RUN   TestValidator_ValidateTaskInput_AllAgentTypes/backend
=== RUN   TestValidator_ValidateTaskInput_AllAgentTypes/api
=== RUN   TestValidator_ValidateTaskInput_AllAgentTypes/testing
=== RUN   TestValidator_ValidateTaskInput_AllAgentTypes/devops
=== RUN   TestValidator_ValidateTaskInput_AllAgentTypes/general
--- PASS: TestValidator_ValidateTaskInput_AllAgentTypes (0.03s)
    --- PASS: TestValidator_ValidateTaskInput_AllAgentTypes/frontend (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_AllAgentTypes/backend (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_AllAgentTypes/api (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_AllAgentTypes/testing (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_AllAgentTypes/devops (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_AllAgentTypes/general (0.00s)
=== RUN   TestValidator_ValidateTaskInput_InvalidPriority
=== RUN   TestValidator_ValidateTaskInput_InvalidPriority/Priority_0
=== RUN   TestValidator_ValidateTaskInput_InvalidPriority/Priority_1
=== RUN   TestValidator_ValidateTaskInput_InvalidPriority/Priority_5
=== RUN   TestValidator_ValidateTaskInput_InvalidPriority/Priority_10
=== RUN   TestValidator_ValidateTaskInput_InvalidPriority/Priority_11
=== RUN   TestValidator_ValidateTaskInput_InvalidPriority/Priority_-1
--- PASS: TestValidator_ValidateTaskInput_InvalidPriority (0.03s)
    --- PASS: TestValidator_ValidateTaskInput_InvalidPriority/Priority_0 (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_InvalidPriority/Priority_1 (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_InvalidPriority/Priority_5 (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_InvalidPriority/Priority_10 (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_InvalidPriority/Priority_11 (0.00s)
    --- PASS: TestValidator_ValidateTaskInput_InvalidPriority/Priority_-1 (0.00s)
=== RUN   TestValidator_ValidateTaskInput_EmptyTitle
--- PASS: TestValidator_ValidateTaskInput_EmptyTitle (0.03s)
=== RUN   TestValidator_ValidateDependencies_SingleDependency
--- PASS: TestValidator_ValidateDependencies_SingleDependency (0.04s)
=== RUN   TestValidator_ValidateDependencies_MultipleDependencies
--- PASS: TestValidator_ValidateDependencies_MultipleDependencies (0.05s)
=== RUN   TestValidator_ValidateDependencies_EmptyDependsOn
--- PASS: TestValidator_ValidateDependencies_EmptyDependsOn (0.03s)
=== RUN   TestValidator_ValidateDependencies_NonExistentDependency
--- PASS: TestValidator_ValidateDependencies_NonExistentDependency (0.03s)
=== RUN   TestValidator_ValidateDependencies_InvalidKeyFormat
--- PASS: TestValidator_ValidateDependencies_InvalidKeyFormat (0.03s)
=== RUN   TestValidator_ValidateDependencies_WithWhitespace
--- PASS: TestValidator_ValidateDependencies_WithWhitespace (0.05s)
=== RUN   TestValidateAgentType
=== RUN   TestValidateAgentType/Frontend
=== RUN   TestValidateAgentType/Backend
=== RUN   TestValidateAgentType/API
=== RUN   TestValidateAgentType/Testing
=== RUN   TestValidateAgentType/DevOps
=== RUN   TestValidateAgentType/General
=== RUN   TestValidateAgentType/Invalid
=== RUN   TestValidateAgentType/Empty
=== RUN   TestValidateAgentType/Uppercase
--- PASS: TestValidateAgentType (0.00s)
    --- PASS: TestValidateAgentType/Frontend (0.00s)
    --- PASS: TestValidateAgentType/Backend (0.00s)
    --- PASS: TestValidateAgentType/API (0.00s)
    --- PASS: TestValidateAgentType/Testing (0.00s)
    --- PASS: TestValidateAgentType/DevOps (0.00s)
    --- PASS: TestValidateAgentType/General (0.00s)
    --- PASS: TestValidateAgentType/Invalid (0.00s)
    --- PASS: TestValidateAgentType/Empty (0.00s)
    --- PASS: TestValidateAgentType/Uppercase (0.00s)
=== RUN   TestValidatePriority
=== RUN   TestValidatePriority/Minimum_valid
=== RUN   TestValidatePriority/Middle_valid
=== RUN   TestValidatePriority/Maximum_valid
=== RUN   TestValidatePriority/Below_minimum
=== RUN   TestValidatePriority/Above_maximum
=== RUN   TestValidatePriority/Negative
--- PASS: TestValidatePriority (0.00s)
    --- PASS: TestValidatePriority/Minimum_valid (0.00s)
    --- PASS: TestValidatePriority/Middle_valid (0.00s)
    --- PASS: TestValidatePriority/Maximum_valid (0.00s)
    --- PASS: TestValidatePriority/Below_minimum (0.00s)
    --- PASS: TestValidatePriority/Above_maximum (0.00s)
    --- PASS: TestValidatePriority/Negative (0.00s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/taskcreation	(cached)
=== RUN   TestParseTaskFileContent
=== RUN   TestParseTaskFileContent/valid_task_file
=== RUN   TestParseTaskFileContent/minimal_valid_task
=== RUN   TestParseTaskFileContent/task_with_dependencies
=== RUN   TestParseTaskFileContent/missing_frontmatter
=== RUN   TestParseTaskFileContent/missing_closing_delimiter
=== RUN   TestParseTaskFileContent/empty_content
--- PASS: TestParseTaskFileContent (0.00s)
    --- PASS: TestParseTaskFileContent/valid_task_file (0.00s)
    --- PASS: TestParseTaskFileContent/minimal_valid_task (0.00s)
    --- PASS: TestParseTaskFileContent/task_with_dependencies (0.00s)
    --- PASS: TestParseTaskFileContent/missing_frontmatter (0.00s)
    --- PASS: TestParseTaskFileContent/missing_closing_delimiter (0.00s)
    --- PASS: TestParseTaskFileContent/empty_content (0.00s)
=== RUN   TestParseTaskFile
--- PASS: TestParseTaskFile (0.00s)
=== RUN   TestParseTaskFile_NonExistent
--- PASS: TestParseTaskFile_NonExistent (0.00s)
=== RUN   TestParseTaskFile_InvalidFormat
--- PASS: TestParseTaskFile_InvalidFormat (0.00s)
=== RUN   TestTaskMetadata_Validate
=== RUN   TestTaskMetadata_Validate/valid_metadata
=== RUN   TestTaskMetadata_Validate/missing_task_key
=== RUN   TestTaskMetadata_Validate/missing_status
=== RUN   TestTaskMetadata_Validate/missing_title
=== RUN   TestTaskMetadata_Validate/invalid_status
=== RUN   TestTaskMetadata_Validate/all_valid_statuses
--- PASS: TestTaskMetadata_Validate (0.00s)
    --- PASS: TestTaskMetadata_Validate/valid_metadata (0.00s)
    --- PASS: TestTaskMetadata_Validate/missing_task_key (0.00s)
    --- PASS: TestTaskMetadata_Validate/missing_status (0.00s)
    --- PASS: TestTaskMetadata_Validate/missing_title (0.00s)
    --- PASS: TestTaskMetadata_Validate/invalid_status (0.00s)
    --- PASS: TestTaskMetadata_Validate/all_valid_statuses (0.00s)
=== RUN   TestParseTaskFileContent_Dependencies
--- PASS: TestParseTaskFileContent_Dependencies (0.00s)
=== RUN   TestFormatTaskFile
=== RUN   TestFormatTaskFile/minimal_task
=== RUN   TestFormatTaskFile/task_with_dependencies
=== RUN   TestFormatTaskFile/task_with_all_fields
--- PASS: TestFormatTaskFile (0.00s)
    --- PASS: TestFormatTaskFile/minimal_task (0.00s)
    --- PASS: TestFormatTaskFile/task_with_dependencies (0.00s)
    --- PASS: TestFormatTaskFile/task_with_all_fields (0.00s)
=== RUN   TestWriteTaskFile
--- PASS: TestWriteTaskFile (0.00s)
=== RUN   TestWriteTaskFile_InvalidMetadata
--- PASS: TestWriteTaskFile_InvalidMetadata (0.00s)
=== RUN   TestWriteTaskFile_Atomic
--- PASS: TestWriteTaskFile_Atomic (0.00s)
=== RUN   TestUpdateTaskMetadata
--- PASS: TestUpdateTaskMetadata (0.00s)
=== RUN   TestUpdateTaskMetadata_ValidationError
--- PASS: TestUpdateTaskMetadata_ValidationError (0.00s)
=== RUN   TestCreateTaskFile
--- PASS: TestCreateTaskFile (0.00s)
=== RUN   TestRoundTrip
--- PASS: TestRoundTrip (0.00s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/taskfile	(cached)
=== RUN   TestRenderer_Render_Frontend
--- PASS: TestRenderer_Render_Frontend (0.00s)
=== RUN   TestRenderer_Render_Backend
--- PASS: TestRenderer_Render_Backend (0.00s)
=== RUN   TestRenderer_Render_API
--- PASS: TestRenderer_Render_API (0.00s)
=== RUN   TestRenderer_Render_Testing
--- PASS: TestRenderer_Render_Testing (0.00s)
=== RUN   TestRenderer_Render_DevOps
--- PASS: TestRenderer_Render_DevOps (0.00s)
=== RUN   TestRenderer_Render_General
--- PASS: TestRenderer_Render_General (0.00s)
=== RUN   TestRenderer_Render_EmptyDescription
--- PASS: TestRenderer_Render_EmptyDescription (0.00s)
=== RUN   TestRenderer_Render_MultipleDependencies
--- PASS: TestRenderer_Render_MultipleDependencies (0.00s)
=== RUN   TestRenderer_Render_FrontmatterValidYAML
--- PASS: TestRenderer_Render_FrontmatterValidYAML (0.00s)
=== RUN   TestRenderer_Render_InvalidAgentType
--- PASS: TestRenderer_Render_InvalidAgentType (0.00s)
=== RUN   TestTemplateFuncs_Join
--- PASS: TestTemplateFuncs_Join (0.00s)
=== RUN   TestTemplateFuncs_Quote
--- PASS: TestTemplateFuncs_Quote (0.00s)
=== RUN   TestTemplateFuncs_IsEmpty
--- PASS: TestTemplateFuncs_IsEmpty (0.00s)
=== RUN   TestTemplateFuncs_FormatTime
--- PASS: TestTemplateFuncs_FormatTime (0.00s)
=== RUN   TestTemplateFuncs_FormatDate
--- PASS: TestTemplateFuncs_FormatDate (0.00s)
PASS
ok  	github.com/jwwelbor/shark-task-manager/internal/templates	(cached)
