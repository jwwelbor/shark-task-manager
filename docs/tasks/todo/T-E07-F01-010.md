
---
key: T-E07-F01-010
title: Write integration tests and perform end-to-end verification
epic: E07
feature: E07-F01
agent: qa
status: todo
priority: 10
created_at: 2025-12-18T04:54:03Z
---

# Task: Integration Testing and Verification

## Goal

Write comprehensive integration tests for epic and feature custom filename functionality and perform end-to-end testing to verify all features work correctly together.

**Reference**: See dev-artifacts/2025-12-18-custom-filename-feature/PROGRESS.md Phase 7 for task testing strategy and manual CLI testing.

## Requirements

### Functional Requirements

- [ ] Unit tests for EpicRepository GetByFilePath and UpdateFilePath
- [ ] Unit tests for FeatureRepository GetByFilePath and UpdateFilePath
- [ ] Unit tests for ValidateCustomFilename across all entity types
- [ ] Integration tests for epic create with custom filename
- [ ] Integration tests for feature create with custom filename
- [ ] Tests for collision detection (both entities)
- [ ] Tests for force reassignment (both entities)
- [ ] Tests for validation failure scenarios
- [ ] Tests for backward compatibility (default behavior unchanged)

### Non-Functional Requirements

- [ ] All tests pass: `make test`
- [ ] Test coverage comprehensive
- [ ] Tests follow existing patterns in codebase

## Implementation Plan

### Test Files to Create/Update

1. **internal/repository/epic_repository_test.go**
   - TestEpicRepository_GetByFilePath
   - TestEpicRepository_UpdateFilePath

2. **internal/repository/feature_repository_test.go**
   - TestFeatureRepository_GetByFilePath
   - TestFeatureRepository_UpdateFilePath

3. **internal/taskcreation/validation_test.go**
   - TestValidateCustomFilename_ValidPaths
   - TestValidateCustomFilename_InvalidPaths
   - TestValidateCustomFilename_PathNormalization
   - etc. (comprehensive coverage)

4. **internal/cli/commands/epic_test.go**
   - TestEpicCreate_CustomFilename
   - TestEpicCreate_ExistingFile
   - TestEpicCreate_Collision
   - TestEpicCreate_ForceReassignment
   - TestEpicCreate_InvalidPaths
   - TestEpicCreate_DefaultBehavior

5. **internal/cli/commands/feature_test.go**
   - Same set of tests for features

### Steps

1. [ ] Write unit tests for repository methods (GetByFilePath, UpdateFilePath)
2. [ ] Write validation tests for ValidateCustomFilename
3. [ ] Write integration tests for epic create CLI command
4. [ ] Write integration tests for feature create CLI command
5. [ ] Test all validation failures (absolute path, traversal, wrong extension)
6. [ ] Test collision detection scenarios
7. [ ] Test force reassignment behavior
8. [ ] Test default behavior unchanged
9. [ ] Run full test suite: `make test`
10. [ ] Manual CLI testing with real project

## Deliverables

- [ ] All unit tests written and passing
- [ ] All integration tests written and passing
- [ ] All validation tests written and passing
- [ ] Test coverage comprehensive
- [ ] Manual testing completed
- [ ] All tests pass: make test

## Acceptance Criteria

- [ ] All unit tests passing
- [ ] All integration tests passing
- [ ] 90%+ code coverage for new code
- [ ] All edge cases covered
- [ ] Manual testing verified all scenarios
- [ ] Code review approved

## Testing Strategy

### Unit Tests
- Repository methods with various inputs
- Validation function with all edge cases
- File path handling

### Integration Tests
- Epic create with custom filename
- Feature create with custom filename
- Collision detection
- Force reassignment
- File creation and association

### End-to-End (Manual)
- Create epic with custom filename
- Create feature with custom filename
- Test collision detection
- Test force reassignment
- Verify database records
- Verify files created correctly
- Test all validation failures
- Test default behavior unchanged

## Dependencies

Depends on: All previous tasks (T-E07-F01-001 through T-E07-F01-009)

