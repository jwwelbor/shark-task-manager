---
task_key: T-E06-F01-003
status: todo
feature: /docs/plan/E06-intelligent-scanning/E06-F01-pattern-config-system
created: 2025-12-17
assigned_agent: backend
dependencies: []
estimated_time: 8 hours
---

# Task: Implement Pattern Preset Library

---

## Goal

Implement built-in pattern preset collections that users can add to their configuration via CLI commands without writing regex from scratch, enabling easy adoption of common pattern conventions.

## What to Build

Create a preset library with common pattern collections and CLI commands to list, show, and add presets to `.sharkconfig.json`.

**Core Components**:

1. **Preset Pattern Collections**:
   - **standard**: Default E##-slug conventions for all entity types
   - **special-epics**: Patterns for tech-debt, bugs, change-cards epic types
   - **numeric-only**: E001, F001, T001 style numbering without slugs
   - **legacy-prp**: Support for .prp.md files in prps/ subfolder
   - Each preset is JSON structure with patterns for one or more entity types
   - Presets embedded in binary (not external files)

2. **List Presets Command** (`shark config list-presets`):
   - Display preset names with brief descriptions
   - Available even without .sharkconfig.json
   - Output format:
     ```
     Available Pattern Presets:
       standard         - Default E##-slug conventions (shipped by default)
       special-epics    - Patterns for tech-debt, bugs, change-cards
       numeric-only     - E001, F001, T001 numbering without slugs
       legacy-prp       - Support for .prp.md files in prps/ subfolder
     ```

3. **Show Preset Command** (`shark config show-preset <name>`):
   - Display full pattern structure for specified preset
   - Show patterns in JSON format ready for manual copying
   - Indicate which entity types the preset affects
   - Example: `shark config show-preset special-epics`

4. **Add Preset Command** (`shark config add-pattern --preset=<name>`):
   - Append preset patterns to existing config (not replace)
   - Handle duplicate patterns gracefully (skip if exact pattern already exists)
   - Validate combined patterns after addition
   - Update .sharkconfig.json with merged patterns
   - Provide feedback showing which patterns were added vs. skipped
   - Handle unknown preset names with error listing available presets

## Why This Matters

Most users don't want to write complex regex patterns. Presets enable users to add support for common conventions (special epics, PRP files, numeric patterns) in <30 seconds without regex knowledge, reducing adoption barrier from hours to minutes.

## Success Criteria

- [ ] Four preset collections defined: standard, special-epics, numeric-only, legacy-prp
- [ ] `shark config list-presets` displays preset names and descriptions
- [ ] `shark config show-preset <name>` displays full pattern structure
- [ ] `shark config add-pattern --preset=<name>` appends patterns to config
- [ ] Duplicate patterns skipped with informational message
- [ ] Unknown preset names rejected with error listing available presets
- [ ] Combined patterns validated after addition
- [ ] All presets include correct named capture groups

## Reference Documents

- **PRD**: `/docs/plan/E06-intelligent-scanning/E06-F01-pattern-config-system/prd.md`
  - Requirements: FR-009 (Preset Pattern Collections), FR-010 (Add Preset Command), FR-011 (List Presets), FR-012 (Show Preset)
  - Acceptance Criteria: AC-008, AC-009, AC-010, AC-011, AC-012

## Dependencies

- T-E06-F01-001 (Pattern Configuration Schema)
- T-E06-F01-002 (Pattern Validation Engine)

## Validation

1. Test `shark config list-presets` displays all four presets
2. Test `shark config show-preset special-epics` displays patterns
3. Test `shark config add-pattern --preset=special-epics` appends patterns
4. Test duplicate pattern detection and skipping
5. Test unknown preset rejection with helpful error
6. Verify validation runs after adding preset
7. Test each preset's patterns have correct capture groups

## Estimated Complexity

**Medium** - Preset data structure definition and CLI commands for preset management

---

**Status**: created
**Created**: 2025-12-17
