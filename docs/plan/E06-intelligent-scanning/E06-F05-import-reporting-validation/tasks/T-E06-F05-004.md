---
task_key: T-E06-F05-004
status: completed
feature: /docs/plan/E06-intelligent-scanning/E06-F05-import-reporting-validation
created: 2025-12-17
assigned_agent: backend
dependencies: [T-E06-F05-001, T-E06-F05-002, T-E06-F05-003]
estimated_time: 6 hours
completed: 2025-12-18
---

# Task: Integration, Testing, and Documentation

## Goal

Integrate all reporting and validation components with sync and validate commands, implement comprehensive test coverage including end-to-end scenarios, validate performance requirements (<5% reporting overhead), and create user documentation for reporting features and validation command.

## Success Criteria

- [ ] Scan report integrated into sync command output
- [ ] Validate command fully functional and tested
- [ ] Dry-run mode working with all sync flags
- [ ] Integration tests: full scan with errors, validation with failures, dry-run workflow
- [ ] Performance validated: reporting adds <5% overhead
- [ ] User documentation: sync reporting, validate command usage, JSON schema
- [ ] CLI help text updated for new flags and commands
- [ ] All tests passing, coverage >85% for reporting/validation code

## Implementation Guidance

### Overview

Complete the integration of reporting and validation infrastructure into the shark CLI. Ensure all components work together correctly, validate performance meets requirements, write comprehensive tests covering success and failure scenarios, and document the new capabilities for users.

### Key Requirements

- **Integration**: Scan reports, validation, dry-run all working together - See [PRD - All FRs](../prd.md#functional-requirements)
- **Performance**: Reporting <5% overhead, validation <1s for 1000 entities - See [PRD - REQ-NF-001, REQ-NF-002](../prd.md#performance)
- **Testing**: Integration tests for complete workflows - See [PRD - REQ-NF-015](../prd.md#maintainability)
- **Documentation**: User guide for reporting and validation - See [PRD - Out of Scope](../prd.md#explicitly-not-included)
- **Usability**: Clear error messages, actionable suggestions - See [PRD - REQ-NF-007](../prd.md#usability)

### Files to Create/Modify

**Modified Files**:
- `cmd/shark/commands/sync.go` - Integrate scan reporting
- `cmd/shark/commands/root.go` - Add validate command

**New Files**:
- `test/integration/reporting_test.go` - End-to-end reporting tests
- `test/integration/validation_test.go` - End-to-end validation tests
- `docs/user-guide/sync-reporting.md` - User documentation
- `docs/user-guide/validation.md` - Validate command documentation
- `docs/api/json-schema.md` - JSON output schema documentation

**Test Coverage**:
- Full scan with 100 files, 20 errors: report shows all details
- Validation with 5 failures: correct suggestions provided
- Dry-run â†’ real sync: second sync shows 0 changes
- JSON output: parse and validate schema compliance
- Performance: benchmark reporting overhead

### Validation Gates

- [ ] Sync 100 files with 20 errors: complete report with all skipped files listed
- [ ] Sync --output=json: valid JSON matching documented schema
- [ ] Sync --dry-run: reports changes, database unchanged
- [ ] Validate after successful sync: exit code 0, "All validations passed"
- [ ] Validate with 3 broken paths: exit code 1, paths and suggestions listed
- [ ] Reporting overhead: <5% added time for 100-file scan
- [ ] Validation performance: 1000 entities validated in <1s
- [ ] Documentation: users can follow guides to use reporting and validation
- [ ] CLI help: shark sync --help shows all flags with descriptions
- [ ] Integration tests: all passing, cover major workflows

### Integration Points

- **Sync Engine**: Uses ScanReport from T-E06-F05-001
- **Validate Command**: Uses Validator from T-E06-F05-002
- **Dry-Run**: Uses enhanced reporting from T-E06-F05-003
- **User Documentation**: Explains all reporting features and validation usage

### Notes for Agent

- Integration tests should use realistic scenarios (real task files, not mocks)
- Performance benchmarks: use Go's testing.B for accurate measurements
- JSON schema documentation: include version, all fields, examples
- User guide: include common scenarios, troubleshooting, examples
- CLI help text: concise but complete, mention related flags
- Consider adding --quiet flag to suppress report (for scripting)
- Validation command could become basis for CI integration (future)
