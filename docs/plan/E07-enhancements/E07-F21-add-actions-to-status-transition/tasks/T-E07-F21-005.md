
---
key: T-E07-F21-005
title: Add example workflow configurations
epic: E07
feature: E07-F21
agent: backend
status: todo
priority: 8
depends_on: ["T-E07-F21-001", "T-E07-F21-003"]
created_at: 2026-01-15T01:52:55Z
---

# Task: Add example workflow configurations

## Goal

Create working example workflow configurations that serve as documentation and test fixtures. These examples demonstrate different complexity levels and use cases for the orchestrator_action feature, helping users understand how to configure workflows for their projects.

## Purpose

Example configurations serve three critical functions:
1. **Documentation**: Show users how to structure orchestrator_action definitions
2. **Test Fixtures**: Provide validated configurations for integration testing
3. **Templates**: Give users starting points for their own workflows

## Example Configurations to Create

### 1. Simple Workflow (docs/examples/workflows/simple.json)

**Purpose**: Minimal workflow for basic projects
**Use Case**: Small teams, simple task lifecycle, minimal stages
**Complexity**: Low (4-5 statuses)

**Statuses to Include**:
- `todo` - Initial state, no action
- `in_progress` - Development work
  - `orchestrator_action`: spawn_agent (developer, skills: [implementation])
- `review` - Code review
  - `orchestrator_action`: spawn_agent (reviewer, skills: [code-review])
- `done` - Completed
  - `orchestrator_action`: archive
- `blocked` - Waiting on dependency
  - `orchestrator_action`: pause

**Key Features**:
- Linear flow: todo → in_progress → review → done
- Only essential statuses
- Clear, simple instructions

---

### 2. WormwoodGM Workflow (docs/examples/workflows/wormwoodgm.json)

**Purpose**: Complete multi-stage workflow with refinement phases
**Use Case**: AI-driven development with business analysis and architecture phases
**Complexity**: High (10-12 statuses)

**Statuses to Include** (based on feature PRD example):
- `draft` - Initial creation
  - `orchestrator_action`: wait_for_triage
- `ready_for_refinement_ba` - Queue for business analyst
  - `orchestrator_action`: spawn_agent (business-analyst, skills: [specification-writing, research, shark-task-management])
- `in_refinement_ba` - BA working
- `ready_for_refinement_tech` - Queue for architect
  - `orchestrator_action`: spawn_agent (architect, skills: [architecture, database-design, api-design])
- `in_refinement_tech` - Architect working
- `ready_for_development` - Queue for developer
  - `orchestrator_action`: spawn_agent (developer, skills: [test-driven-development, implementation, shark-task-management])
- `in_development` - Developer working
- `ready_for_code_review` - Queue for review
  - `orchestrator_action`: spawn_agent (reviewer, skills: [code-review, quality])
- `in_code_review` - Review in progress
- `ready_for_qa` - Queue for QA
  - `orchestrator_action`: spawn_agent (qa-engineer, skills: [testing, validation])
- `in_qa` - Testing in progress
- `ready_for_approval` - Final approval
  - `orchestrator_action`: spawn_agent (tech-lead, skills: [quality, approval])
- `in_approval` - Approval in progress
- `completed` - Finished
  - `orchestrator_action`: archive
- `blocked` - Dependency waiting
  - `orchestrator_action`: pause
- `cancelled` - No longer needed
  - `orchestrator_action`: archive

**Key Features**:
- Multi-phase refinement (BA → Architect → Developer)
- Clear separation of concerns (refinement vs implementation)
- Comprehensive quality gates (code review, QA, approval)
- Rich skill sets for each agent type

---

### 3. Enterprise Workflow (docs/examples/workflows/enterprise.json)

**Purpose**: Corporate workflow with compliance and approval stages
**Use Case**: Large organizations, audit requirements, security reviews
**Complexity**: High (12-15 statuses)

**Statuses to Include**:
- `draft` - Created
- `ready_for_refinement` - Requirements gathering
  - `orchestrator_action`: spawn_agent (business-analyst)
- `ready_for_security_review` - Security assessment
  - `orchestrator_action`: spawn_agent (security-engineer, skills: [security, compliance])
- `ready_for_architecture_review` - Architecture design
  - `orchestrator_action`: spawn_agent (architect)
- `ready_for_development` - Implementation
  - `orchestrator_action`: spawn_agent (developer)
- `ready_for_code_review` - Peer review
  - `orchestrator_action`: spawn_agent (senior-developer)
- `ready_for_qa` - Testing
  - `orchestrator_action`: spawn_agent (qa-engineer)
- `ready_for_compliance_check` - Compliance verification
  - `orchestrator_action`: spawn_agent (compliance-officer, skills: [compliance, audit])
- `ready_for_approval` - Management approval
  - `orchestrator_action`: wait_for_triage (human decision required)
- `approved` - Ready for deployment
- `completed` - Deployed
  - `orchestrator_action`: archive
- `blocked` - Dependency
  - `orchestrator_action`: pause
- `rejected` - Failed approval
  - `orchestrator_action`: archive

**Key Features**:
- Security and compliance stages
- Human approval gates (wait_for_triage)
- Audit trail emphasis
- Corporate governance requirements

---

## Implementation Requirements

### File Structure

```
docs/examples/workflows/
├── README.md                # Overview of examples, usage guide
├── simple.json             # Minimal workflow
├── wormwoodgm.json         # Full AI-driven workflow
└── enterprise.json         # Corporate/compliance workflow
```

### Configuration Format

Each example must include:
1. **Complete status_flow**: All valid transitions
2. **Full status_metadata**: Color, description, phase, agent_types, orchestrator_action
3. **Special statuses**: `_start_`, `_complete_` markers
4. **Comments**: Inline explanations for key decisions

### Example README.md Content

The README should include:
- Overview of each example
- When to use each workflow
- How to customize for your needs
- Links to full documentation

## Acceptance Criteria

- [ ] All three example files created (simple, wormwoodgm, enterprise)
- [ ] Each example passes validation: `shark workflow validate-actions --config=<example-file>`
- [ ] README.md explains each workflow's purpose and use case
- [ ] Examples demonstrate all four action types: spawn_agent, pause, wait_for_triage, archive
- [ ] WormwoodGM example matches the excerpt in feature PRD (lines 727-782)
- [ ] All status_flow transitions are valid and complete
- [ ] All "ready_for_*" statuses have orchestrator_action defined
- [ ] Template variables ({task_id}) used correctly in instruction_template
- [ ] Agent types align with expected agent capabilities
- [ ] Skills arrays are meaningful and specific

## Validation Requirements

### Schema Validation

Each example must:
- Pass JSON schema validation (if schema defined in T-E07-F21-001)
- Have all required fields for each action type
- Use only valid action types: spawn_agent, pause, wait_for_triage, archive
- Include agent_type and skills when action is spawn_agent

### Completeness Validation

- All statuses in status_flow have corresponding status_metadata
- All actionable statuses (typically "ready_for_*") have orchestrator_action
- No circular transitions (except blocked → unblocked)
- Clear terminal statuses (completed, cancelled, rejected)

### Integration Testing

- Examples loaded by config parser without errors
- Validation command accepts examples as valid
- Examples can be used as .sharkconfig.json (when appropriate)

## Testing Requirements

### Automated Tests

- [ ] Add test case: load simple.json and validate
- [ ] Add test case: load wormwoodgm.json and validate
- [ ] Add test case: load enterprise.json and validate
- [ ] Add test case: verify all examples have required statuses
- [ ] Add test case: verify all spawn_agent actions have agent_type and skills
- [ ] Add test case: verify template syntax in instruction_template

### Manual Verification

- [ ] README.md is clear and helpful
- [ ] Examples are well-commented
- [ ] Instruction templates are realistic and actionable
- [ ] Workflow phases make logical sense

## Documentation Integration

### Update Main Documentation

- [ ] Reference examples in feature PRD
- [ ] Add examples to CLI reference (shark workflow commands)
- [ ] Link from CLAUDE.md to example workflows
- [ ] Include in Turso migration guide as test fixtures

### Example Usage Documentation

In README.md, document:
```bash
# Use an example as your .sharkconfig.json
cp docs/examples/workflows/simple.json .sharkconfig.json

# Validate an example
shark workflow validate-actions --config=docs/examples/workflows/wormwoodgm.json

# View actions in an example
shark workflow show-actions --config=docs/examples/workflows/enterprise.json
```

## Dependencies

**Requires Completion Of**:
- T-E07-F21-001: Schema definition (to know valid action structure)
- T-E07-F21-003: Validation implementation (to test examples)

**Blocks**:
- T-E07-F21-007: CLI utility commands (uses examples for testing)
- T-E07-F21-012: Integration tests (uses examples as fixtures)

## Notes

- Examples serve as living documentation - keep them updated with schema changes
- Use realistic agent types and skills based on actual orchestrator capabilities
- Instruction templates should be helpful to humans debugging workflows
- Consider examples as public API - breaking changes require version bumps
- Examples should demonstrate best practices, not just minimal compliance
