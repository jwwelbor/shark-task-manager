---
agent: backend
created_at: 2026-01-01T07:35:48Z
epic: E07
feature: E07-F12
key: T-E07-F12-002
priority: 8
status: todo
task_key: T-E07-F12-011
title: Create validators.go with validation functions
---


# Task: Create validators.go with validation functions

## Goal

Create a shared validation module that centralizes parameter validation logic with clear error handling. This eliminates duplicate validation code across epic and feature commands.

## Related Documentation

- Implementation Plan: dev-artifacts/2026-01-01-parameter-consistency-research/implementation-plan.md (lines 120-192)

## Implementation Details

### File to Create

- Location: internal/cli/commands/validators.go

### API Design

Create the following types and functions:

```go
// PathValidationResult holds validated path information
type PathValidationResult struct {
    RelativePath string
    AbsolutePath string
}

// Validation functions
func ValidateCustomPath(cmd *cobra.Command, flagName string) (*PathValidationResult, error)
func ValidateCustomFilename(cmd *cobra.Command, flagName string, projectRoot string) (*PathValidationResult, error)
func ValidateNoSpaces(key string, entityType string) error
func ValidateStatus(status string, entityType string) error
func ValidatePriority(priority string, entityType string) error
```

### Validation Pattern

Each validator follows this pattern:
1. Early return if flag not provided (returns nil, no error)
2. Apply business rules and constraints
3. Provide context in error messages
4. Use standard error formats

### Implementation Strategy

1. Extract validation logic from epic.go and feature.go
2. Identify common patterns
3. Create reusable functions with clear contracts
4. Write comprehensive tests
5. DO NOT modify epic.go or feature.go yet (that's Phase 3)

## Acceptance Criteria

- [ ] ValidateCustomPath handles empty/invalid/valid paths correctly
- [ ] ValidateCustomFilename validates file path format and extension
- [ ] ValidateNoSpaces rejects keys with spaces
- [ ] ValidateStatus accepts: draft, active, completed, archived
- [ ] ValidatePriority accepts: low, medium, high
- [ ] All validators return nil when flag not provided
- [ ] Error messages provide clear context
- [ ] No changes to epic.go or feature.go

## Testing Requirements

### Unit Tests (validators_test.go)

- [ ] TestValidateCustomPath_Valid - Valid path cases
- [ ] TestValidateCustomPath_Invalid - Invalid path cases
- [ ] TestValidateCustomPath_NotProvided - Empty flag returns nil
- [ ] TestValidateCustomFilename_Valid - Valid filename cases
- [ ] TestValidateCustomFilename_Invalid - Invalid filename cases
- [ ] TestValidateNoSpaces_Valid - Keys without spaces
- [ ] TestValidateNoSpaces_Invalid - Keys with spaces
- [ ] TestValidateStatus_AllValidValues - All valid status values
- [ ] TestValidateStatus_InvalidValue - Invalid status value
- [ ] TestValidatePriority_AllValidValues - All valid priority values
- [ ] TestValidatePriority_InvalidValue - Invalid priority value

### Coverage Target

- 95%+ coverage for validators.go

## Notes

- This is Phase 2 Task 2 of 5
- Extracts validation logic into reusable functions
- Must be completed before Phase 3 refactoring
- Follow TDD: write tests first, then implementation
- All tests should be pure unit tests (no database, no mocks)
