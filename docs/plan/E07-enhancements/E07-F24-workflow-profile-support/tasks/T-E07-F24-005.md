---
task_key: T-E07-F24-005
feature_key: E07-F24
title: "Phase 5: Update documentation and guides"
status: todo
agent: developer
priority: 6
estimated_hours: 1-2
dependencies:
  - T-E07-F24-004
related_docs:
  - ../technical-design.md
  - ../specifications/business-requirements.md
---

# Task: Phase 5 - Documentation Updates

**Feature**: E07-F24 - Workflow Profile Support
**Phase**: 5 of 6
**Estimated Time**: 1-2 hours

## Objective

Create comprehensive documentation for the workflow profile feature, including CLI reference updates, workflow profile guides, example configurations, and AI agent instructions.

## Files to Modify/Create

1. `docs/CLI_REFERENCE.md` (modify)
   - Add `shark init update` command documentation
   - Document flags and usage examples
   - Add profile selection guidance

2. `docs/guides/workflow-profiles.md` (create)
   - Overview of workflow profiles
   - Basic vs advanced profile comparison
   - Profile selection guidelines
   - Migration guide

3. `CLAUDE.md` (modify)
   - Update agent status routing for advanced workflow
   - Document agent type assignments
   - Add workflow profile context

4. Example configs (create):
   - `docs/examples/basic-profile-config.json`
   - `docs/examples/advanced-profile-config.json`

## Implementation Plan

### Step 1: Update CLI Reference (`docs/CLI_REFERENCE.md`)

Add new section under "Initialization Commands":

```markdown
### shark init update

Update Shark configuration with workflow profiles or add missing fields.

#### Usage

\`\`\`bash
shark init update [flags]
\`\`\`

#### Flags

- `--workflow=<profile>` - Apply workflow profile (basic or advanced)
- `--force` - Overwrite existing status configurations
- `--dry-run` - Preview changes without applying
- `--json` - Output results as JSON
- `--verbose` - Show detailed merge information

#### Examples

\`\`\`bash
# Add missing configuration fields
shark init update

# Apply basic workflow (5 statuses)
shark init update --workflow=basic

# Apply advanced workflow (19 statuses)
shark init update --workflow=advanced

# Preview changes before applying
shark init update --workflow=advanced --dry-run

# Force overwrite existing configurations
shark init update --workflow=basic --force

# Get JSON output for automation
shark init update --workflow=basic --json
\`\`\`

#### Profiles

**basic** (5 statuses):
- Simple workflow for solo developers
- Statuses: todo, in_progress, ready_for_review, completed, blocked
- No status flow constraints
- Single agent type

**advanced** (19 statuses):
- Comprehensive TDD workflow for teams
- Statuses cover full SDLC: planning, development, review, QA, approval
- Status flow enforcement
- Multiple agent types (ba, tech_lead, developer, qa, product_owner)
- Special status groups

#### Behavior

**Without `--workflow` flag:**
- Adds missing configuration fields
- Preserves all existing values
- Safe for existing configs

**With `--workflow` flag:**
- Applies specified profile
- Overwrites status_metadata, status_flow, special_statuses
- Preserves database, viewer, project_root
- Creates timestamped backup

**Dry-run mode:**
- Shows preview of changes
- Does not modify files
- Useful for validation

#### Protected Fields

These fields are NEVER overwritten (without --force):
- `database` - Database configuration
- `project_root` - Project root path
- `viewer` - File viewer configuration
- `last_sync_time` - Last sync timestamp

#### Backup

Before any write operation, a timestamped backup is created:
\`\`\`
.sharkconfig.json.backup.YYYYMMDD-HHMMSS
\`\`\`

Backups can be restored manually if needed.

#### Exit Codes

- `0` - Success
- `1` - Error (invalid profile, write failure, etc.)
\`\`\`

### Step 2: Create Workflow Profiles Guide (`docs/guides/workflow-profiles.md`)

```markdown
# Workflow Profiles Guide

Shark supports workflow profiles to quickly configure task workflows for different team sizes and development methodologies.

## Overview

Workflow profiles are predefined configurations that set up:
- Status metadata (colors, phases, progress weights)
- Status flow (valid transitions)
- Special status groups
- Agent type assignments
- Responsibility tracking

## Available Profiles

### Basic Profile

**Use for:**
- Solo developers
- Simple projects
- Prototyping and exploration
- Teams learning Shark

**Statuses (5):**
1. `todo` - Task not started (gray, planning)
2. `in_progress` - Work in progress (yellow, development)
3. `ready_for_review` - Awaiting review (magenta, review)
4. `completed` - Task finished (green, done)
5. `blocked` - External dependency (red, any phase)

**Characteristics:**
- No status flow enforcement
- Single agent responsibility
- Simple progress tracking
- Minimal overhead

**Status Flow:**
\`\`\`
todo → in_progress → ready_for_review → completed
                   ↘ blocked ↗
\`\`\`

### Advanced Profile

**Use for:**
- Development teams (3+ people)
- Test-driven development (TDD)
- Multi-stage review processes
- Quality-focused workflows

**Statuses (19):**

**Planning Phase:**
- `draft` - Initial task creation
- `ready_for_refinement` - Ready for BA refinement
- `in_refinement` - Being refined by BA

**Development Phase:**
- `ready_for_development` - Ready to start coding
- `in_development` - Implementation in progress

**Review Phase:**
- `ready_for_code_review` - Code complete, needs review
- `in_code_review` - Tech lead reviewing
- `changes_requested` - Revisions needed

**QA Phase:**
- `ready_for_qa` - Ready for testing
- `in_qa` - QA testing in progress
- `qa_failed` - Tests failed, needs fixes

**Approval Phase:**
- `ready_for_approval` - Ready for final approval
- `in_approval` - Product owner reviewing

**Terminal States:**
- `completed` - Work done and approved
- `cancelled` - Work not needed
- `blocked` - Waiting on external dependency
- `on_hold` - Temporarily suspended

**Characteristics:**
- Status flow enforcement
- Multiple agent types (ba, tech_lead, developer, qa, product_owner)
- Granular progress tracking
- Responsibility assignment
- Special status groups

**Agent Types:**
- **ba** (Business Analyst) - Refinement statuses
- **tech_lead** - Code review, architecture
- **developer** - Implementation
- **qa** - Testing and validation
- **product_owner** - Final approval

## Choosing a Profile

### Choose Basic if:
- ✅ You're working solo or with a small team (1-2 people)
- ✅ Your workflow is simple and flexible
- ✅ You don't need formal review processes
- ✅ You're prototyping or exploring ideas
- ✅ You want minimal configuration

### Choose Advanced if:
- ✅ You have a team with defined roles (3+ people)
- ✅ You practice test-driven development
- ✅ You need formal code review and QA processes
- ✅ You want granular progress tracking
- ✅ You need status flow enforcement

## Applying Profiles

### Fresh Installation

\`\`\`bash
# Initialize with basic profile
shark init

# Or apply advanced profile
shark init
shark init update --workflow=advanced
\`\`\`

### Existing Installation

\`\`\`bash
# Preview changes first
shark init update --workflow=advanced --dry-run

# Apply if satisfied
shark init update --workflow=advanced
\`\`\`

### Migrating Between Profiles

**Basic to Advanced:**
\`\`\`bash
# Tasks in old statuses remain valid
# New statuses become available
shark init update --workflow=advanced
\`\`\`

**Advanced to Basic:**
\`\`\`bash
# Warning: Tasks in advanced-only statuses need migration
# Use --force to overwrite
shark init update --workflow=basic --force
\`\`\`

## Configuration Preservation

When applying profiles, these fields are ALWAYS preserved:
- Database configuration
- Viewer settings
- Project root path
- Last sync time
- Any custom fields not in profile

## Backup and Recovery

### Automatic Backup

Every update creates a timestamped backup:
\`\`\`
.sharkconfig.json.backup.20260125-143022
\`\`\`

### Manual Recovery

\`\`\`bash
# Restore from backup
cp .sharkconfig.json.backup.20260125-143022 .sharkconfig.json
\`\`\`

## Customization

After applying a profile, you can customize:
- Add custom statuses
- Modify colors and descriptions
- Adjust progress weights
- Add agent types
- Extend status flow

Changes are preserved when running `shark init update` without `--workflow` flag.

## Best Practices

1. **Start simple** - Use basic profile initially, upgrade to advanced when needed
2. **Preview first** - Always use `--dry-run` before applying profiles
3. **Backup manually** - Keep important configs in version control
4. **Customize gradually** - Add customizations after understanding defaults
5. **Document changes** - Note why you deviated from standard profile

## Troubleshooting

### Tasks stuck in old statuses after profile change

**Solution:** Manually update task statuses or create migration script.

### Lost custom statuses after applying profile

**Solution:** Restore from backup, then reapply customizations.

### Profile not applying

**Solution:** Check for write permissions on `.sharkconfig.json`.

## Examples

See `docs/examples/` for complete configuration examples:
- `basic-profile-config.json` - Complete basic profile
- `advanced-profile-config.json` - Complete advanced profile
\`\`\`

### Step 3: Update CLAUDE.md

Add section under "Task Lifecycle" or "Agent Instructions":

```markdown
## Workflow Profiles & Agent Routing

Shark supports two workflow profiles with different status sets and agent assignments.

### Basic Profile (Default)

**Statuses:**
- `todo` → `in_progress` → `ready_for_review` → `completed`
- `blocked` (any phase)

**Agent Assignment:**
- All statuses: Generic agent

### Advanced Profile (TDD Workflow)

**Agent Routing by Status:**

**Business Analyst (ba):**
- `ready_for_refinement` - Refine requirements
- `in_refinement` - Active refinement work

**Developer (developer):**
- `ready_for_development` - Start implementation
- `in_development` - Coding in progress
- `changes_requested` - Address review feedback

**Tech Lead (tech_lead):**
- `ready_for_code_review` - Review code
- `in_code_review` - Active code review

**QA (qa):**
- `ready_for_qa` - Begin testing
- `in_qa` - Testing in progress
- `qa_failed` - Fix failing tests

**Product Owner (product_owner):**
- `ready_for_approval` - Final approval needed
- `in_approval` - Review for acceptance

### AI Agent Status Transitions

When working on tasks, AI agents should:

1. **Check current status** before starting work
2. **Transition to in_<phase>** when beginning work
3. **Move to ready_for_<next>** when complete
4. **Update task notes** with progress

**Example (Advanced Workflow):**
\`\`\`bash
# Developer picks up task
shark task start E07-F01-001  # todo → in_development

# Developer completes implementation
shark task complete E07-F01-001  # in_development → ready_for_code_review

# Tech lead reviews
shark task start E07-F01-001  # ready_for_code_review → in_code_review
shark task complete E07-F01-001  # in_code_review → ready_for_qa

# QA tests
shark task start E07-F01-001  # ready_for_qa → in_qa
shark task complete E07-F01-001  # in_qa → ready_for_approval

# Product owner approves
shark task approve E07-F01-001  # ready_for_approval → completed
\`\`\`
```

### Step 4: Create Example Configs

**`docs/examples/basic-profile-config.json`:**
```json
{
  "database": {
    "backend": "local",
    "url": "./shark-tasks.db"
  },
  "color_enabled": true,
  "default_epic": null,
  "default_agent": null,
  "status_metadata": {
    "todo": {
      "color": "gray",
      "phase": "planning",
      "progress_weight": 0.0,
      "responsibility": "none",
      "blocks_feature": false,
      "description": "Task not started"
    },
    "in_progress": {
      "color": "yellow",
      "phase": "development",
      "progress_weight": 0.5,
      "responsibility": "agent",
      "blocks_feature": false,
      "description": "Work in progress"
    },
    "ready_for_review": {
      "color": "magenta",
      "phase": "review",
      "progress_weight": 0.75,
      "responsibility": "human",
      "blocks_feature": true,
      "description": "Awaiting human review"
    },
    "completed": {
      "color": "green",
      "phase": "done",
      "progress_weight": 1.0,
      "responsibility": "none",
      "blocks_feature": false,
      "description": "Task finished"
    },
    "blocked": {
      "color": "red",
      "phase": "any",
      "progress_weight": 0.0,
      "responsibility": "none",
      "blocks_feature": true,
      "description": "Blocked by external dependency"
    }
  }
}
```

**`docs/examples/advanced-profile-config.json`:**
- Copy from current `.sharkconfig.json` in project root
- Include all 19 statuses
- Include status_flow and special_statuses

## Acceptance Criteria

- [x] **AC1**: CLI_REFERENCE.md updated with `shark init update` documentation
- [x] **AC2**: workflow-profiles.md created with comprehensive guide
- [x] **AC3**: CLAUDE.md updated with agent routing for advanced workflow
- [x] **AC4**: Example configs created for both profiles
- [x] **AC5**: All documentation reviewed for accuracy
- [x] **AC6**: Documentation follows existing style and formatting
- [x] **AC7**: Links between documents work correctly
- [x] **AC8**: Code examples are syntactically correct
- [x] **AC9**: Troubleshooting section addresses common issues

## Test Plan

### Documentation Verification

```bash
# Check all markdown files render correctly
# Verify all links work
# Test all code examples
```

### Manual Review Checklist

- [ ] CLI reference examples tested manually
- [ ] Workflow guide instructions verified
- [ ] Example configs valid JSON
- [ ] All internal links working
- [ ] External links accessible
- [ ] Code syntax highlighting correct
- [ ] Screenshots (if added) clear and relevant

## Dependencies

**Requires**:
- T-E07-F24-004 (Phase 4: Working CLI command to document)

**Blocks**:
- T-E07-F24-006 (Phase 6: Documentation used in integration testing)

## Design References

- **Technical Design**: Section "Implementation Phases - Phase 5" (lines 1138-1156)
- **Appendix A**: Basic Profile Definition (lines 1383-1440)
- **Appendix B**: Advanced Profile Definition (lines 1442-1465)

## Success Indicators

✅ All documentation files created/updated
✅ Examples tested and working
✅ Links verified
✅ Style consistent with existing docs
✅ Technical accuracy confirmed
✅ Clear and easy to follow
✅ No broken references

## Notes

- Follow existing documentation style in `docs/` directory
- Use markdown formatting consistently
- Include plenty of examples
- Write for both human users and AI agents
- Keep language clear and concise
- Test all code examples before committing

## Estimated Breakdown

- Update CLI_REFERENCE.md: 20 min
- Create workflow-profiles.md: 40-50 min
- Update CLAUDE.md: 15 min
- Create example configs: 10 min
- Review and link verification: 10-15 min
- **Total**: 1-2 hours
