---
task_key: T-E04-F08-004
status: created
feature: /docs/plan/E04-task-mgmt-cli-core/E04-F08-distribution-release
created: 2025-12-17
assigned_agent: devops-engineer
dependencies: [T-E04-F08-003.md]
estimated_time: 8 hours
---

# Task: End-to-End Release Testing

## Goal

Perform complete release cycle with a beta version, validating all distribution channels (GitHub Releases, Homebrew, Scoop) and measuring performance metrics against targets.

## Success Criteria

- [ ] Beta release (`v0.1.0-beta`) successfully created via workflow
- [ ] All 6 assets uploaded to GitHub release (5 binaries + checksums)
- [ ] Homebrew formula (`Formula/shark.rb`) committed to tap repository
- [ ] Scoop manifest (`bucket/shark.json`) committed to bucket repository
- [ ] Homebrew installation works on macOS (both Intel and Apple Silicon tested)
- [ ] Scoop installation works on Windows
- [ ] Manual binary download and checksum verification works on Linux
- [ ] All performance targets met (build <5 min, workflow <10 min, binaries <10MB, install <30s)
- [ ] Basic CLI functionality verified on all platforms
- [ ] Performance metrics documented

## Implementation Guidance

### Overview

Execute a complete release cycle by cutting a `v0.1.0-beta` release, then systematically validate every distribution channel on all supported platforms. Measure and document actual performance against design targets to identify any optimization needs before production release.

### Key Requirements

- **Complete Workflow Execution**: Trigger full release workflow and monitor all steps - See [Architecture - Release Workflow](../02-architecture.md#release-workflow)
- **Multi-Platform Testing**: Test installation on macOS (Intel + Apple Silicon), Windows, and Linux - See [Implementation - Testing Requirements](../08-implementation-phases.md#phase-4-end-to-end-release-testing)
- **Checksum Verification**: Validate SHA256 checksums for all downloaded binaries - See [Security - Checksum Verification](../06-security-design.md#checksum-verification)
- **Performance Measurement**: Record actual build times, workflow duration, binary sizes, and installation times - See [Performance - Performance Targets](../07-performance-design.md#performance-targets)
- **Functional Testing**: Verify basic CLI commands work correctly on each platform - See [Test Criteria - Functional Tests](../09-test-criteria.md#functional-testing)

### Files to Create/Modify

**Documentation**:
- `docs/release-testing-report.md` - Comprehensive testing results and metrics
- `docs/performance-comparison.md` - Actual vs target performance metrics

**Test Scripts** (create if helpful):
- `scripts/test-homebrew.sh` - Automated Homebrew installation test
- `scripts/test-scoop.ps1` - Automated Scoop installation test
- `scripts/test-manual.sh` - Automated manual download and verification test

### Integration Points

- **All Previous Tasks**: This task validates the complete integration of Tasks 001-003
- **Test Platforms**: Requires access to macOS, Windows, and Linux machines/VMs
- **Package Managers**: Tests integration with Homebrew and Scoop ecosystems
- **GitHub**: Validates complete GitHub Actions → GoReleaser → Distribution chain

Reference: [Architecture - End-to-End Integration](../02-architecture.md#integration-testing)

## Validation Gates

**GitHub Release Validation**:
- Navigate to repository releases page
- Verify draft release created with correct tag (`v0.1.0-beta`)
- Confirm 6 assets present (shark_linux_amd64.tar.gz, shark_linux_arm64.tar.gz, shark_darwin_amd64.tar.gz, shark_darwin_arm64.tar.gz, shark_windows_amd64.zip, checksums.txt)
- Review auto-generated release notes for completeness
- Verify asset sizes are reasonable (<10 MB each)

**Homebrew Installation Validation** (macOS):
```bash
# Add tap
brew tap jwwelbor/shark

# Install shark
brew install shark

# Verify installation
shark --version  # Should show: v0.1.0-beta
which shark      # Should show: /opt/homebrew/bin/shark or /usr/local/bin/shark

# Test basic functionality
shark epic list
shark --help

# Clean up
brew uninstall shark
brew untap jwwelbor/shark
```

**Scoop Installation Validation** (Windows PowerShell):
```powershell
# Add bucket
scoop bucket add shark https://github.com/jwwelbor/scoop-shark

# Install shark
scoop install shark

# Verify installation
shark --version  # Should show: v0.1.0-beta
(Get-Command shark).Path  # Should show scoop apps path

# Test basic functionality
shark epic list
shark --help

# Clean up
scoop uninstall shark
scoop bucket rm shark
```

**Manual Download Validation** (Linux):
```bash
# Download binary and checksums
wget https://github.com/jwwelbor/shark-task-manager/releases/download/v0.1.0-beta/shark_0.1.0-beta_linux_amd64.tar.gz
wget https://github.com/jwwelbor/shark-task-manager/releases/download/v0.1.0-beta/checksums.txt

# Verify checksum
sha256sum -c checksums.txt --ignore-missing
# Should show: shark_0.1.0-beta_linux_amd64.tar.gz: OK

# Extract and test
tar -xzf shark_*.tar.gz
./shark --version  # Should show: v0.1.0-beta
./shark epic list

# Clean up
rm -rf shark* checksums.txt
```

**Performance Validation**:
- Workflow duration: <10 minutes (check GitHub Actions UI)
- Build time: <5 minutes (check workflow step timing)
- Binary sizes: <10 MB compressed (check asset sizes)
- Installation time Homebrew: <30 seconds (time the `brew install` command)
- Installation time Scoop: <30 seconds (time the `scoop install` command)

**Functional Validation**:
- Run `shark --version` on all platforms - verify correct version
- Run `shark --help` - verify help text displays
- Run basic command (e.g., `shark epic list`) - verify executes without error
- Test command with database access - verify persistence works

Reference: [Test Criteria - Phase 4 Tests](../09-test-criteria.md#phase-4-end-to-end-release-testing)

## Context & Resources

- **Architecture**: [Complete Release Flow](../02-architecture.md#complete-release-flow)
- **Architecture**: [Distribution Validation](../02-architecture.md#distribution-validation)
- **Security**: [Checksum Verification Process](../06-security-design.md#checksum-verification)
- **Performance**: [Performance Targets](../07-performance-design.md#performance-targets)
- **Performance**: [Performance Measurement](../07-performance-design.md#performance-measurement)
- **Implementation**: [Phase 4 Details](../08-implementation-phases.md#phase-4-end-to-end-release-testing)
- **Testing**: [Complete Test Suite](../09-test-criteria.md#end-to-end-release-testing)

## Notes for Agent

- **Test Platforms**: Ideally test on actual hardware for each platform (not just emulation/VMs)
- **Beta Cleanup**: After validation, delete beta release and tag to keep releases clean for production
- **Performance Recording**: Document exact timings and sizes for comparison with targets
- **Issue Documentation**: If any tests fail or performance targets missed, document issues and root causes
- **Formula/Manifest Review**: Inspect generated Homebrew formula and Scoop manifest for correctness
- **Edge Cases**: Test installation on clean machines (no prior Go toolchain) to simulate real users
- **Network Conditions**: Test downloads under normal network conditions (not super-fast local network)
- **Multiple Architectures**: Test both Intel and ARM Macs if possible to catch architecture-specific issues
