---
agent: general
created_at: 2025-12-21T19:53:29Z
epic: E07
feature: E07-F06
key: T-E07-F06-005
priority: 5
status: todo
task_key: T-E07-F06-013
title: Feature Integration Tests
---

# Task: Feature Integration Tests

## Goal

Write integration tests for `feature list` command with positional arguments using real database fixtures.

## Requirements

- [ ] Test all combinations: 0 args, 1 arg, 2+ args
- [ ] Test valid epic filtering
- [ ] Test flag syntax still works (`--epic=E04`)
- [ ] Test positional takes priority over flag
- [ ] Test nonexistent epic error handling
- [ ] Test invalid format error messages
- [ ] Verify JSON output format unchanged
- [ ] Verify table output unchanged

## Acceptance Criteria

- [ ] `shark feature list` returns all features
- [ ] `shark feature list E04` filters correctly
- [ ] `shark feature list --epic=E04` identical results
- [ ] `shark feature list E04 F01` shows error
- [ ] All existing regression tests pass
- [ ] Output format unchanged from original

## Test Scenarios

1. No args (list all)
2. Valid epic (filter applied)
3. Invalid epic format (error)
4. Nonexistent epic (not found error)
5. Too many args (error)
6. Flag vs positional priority
7. JSON output with positional filter
8. Mixed flags + positional args

## Dependencies

- T-E07-F06-001: Pattern helpers
- T-E07-F06-002: Feature list implementation
- T-E07-F06-004: Unit tests for patterns
